<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>åŸºäºxmlçš„Springåº”ç”¨ | LuckyBoyğŸ¥</title><meta name="keywords" content="Spring"><meta name="author" content="LuckyBoyğŸ¥"><meta name="copyright" content="LuckyBoyğŸ¥"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="SpringBeançš„é…ç½®è¯¦è§£ã€Beanå®ä¾‹åŒ–çš„åŸºæœ¬æµç¨‹ã€Beançš„ç”Ÿå‘½å‘¨æœŸã€Spring IoCæ•´ä½“æµç¨‹æ€»ç»“"><meta property="og:type" content="article"><meta property="og:title" content="åŸºäºxmlçš„Springåº”ç”¨"><meta property="og:url" content="https://wuwawawa.github.io/posts/42f6a7bf.html"><meta property="og:site_name" content="LuckyBoyğŸ¥"><meta property="og:description" content="SpringBeançš„é…ç½®è¯¦è§£ã€Beanå®ä¾‹åŒ–çš„åŸºæœ¬æµç¨‹ã€Beançš„ç”Ÿå‘½å‘¨æœŸã€Spring IoCæ•´ä½“æµç¨‹æ€»ç»“"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_31.webp"><meta property="article:published_time" content="2023-04-24T09:05:49.000Z"><meta property="article:modified_time" content="2023-05-16T05:26:22.446Z"><meta property="article:author" content="LuckyBoyğŸ¥"><meta property="article:tag" content="Spring"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_31.webp"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://wuwawawa.github.io/posts/42f6a7bf"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},translate:void 0,noticeOutdate:{limitDay:365,position:"top",messagePrev:"It has been",messageNext:"days since the last update, the content of the article may be outdated."},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:640},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!0,post:!0},runtime:"",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js",css:"https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"åŸºäºxmlçš„Springåº”ç”¨",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-05-16 13:26:22"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,n={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(n))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};const t=saveToLocal.get("theme"),o=(new Date).getHours();void 0===t?o<=6||o>=18?activateDarkMode():activateLightMode():"light"===t?activateLightMode():activateDarkMode();const a=saveToLocal.get("aside-status");void 0!==a&&("hide"===a?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute;overflow:hidden;width:0;height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248 626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="LuckyBoyğŸ¥" type="application/atom+xml"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.webp" onerror='onerror=null,src="/assets/r1.jpg"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">89</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">7</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-home"></use></svg> <span class="menu_word" style="font-size:17px">é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--article"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-guidang1"></use></svg> <span class="menu_word" style="font-size:17px">å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-sekuaibiaoqian"></use></svg> <span class="menu_word" style="font-size:17px">æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-fenlei"></use></svg> <span class="menu_word" style="font-size:17px">åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pinweishenghuo"></use></svg> <span class="menu_word" style="font-size:17px">ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-yinle"></use></svg> <span class="menu_word" style="font-size:17px">å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-dianying1"></use></svg> <span class="menu_word" style="font-size:17px">å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-youxishoubing"></use></svg> <span class="menu_word" style="font-size:17px">æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xiangzi"></use></svg> <span class="menu_word" style="font-size:17px">å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-tubiaozhizuomoban"></use></svg> <span class="menu_word" style="font-size:17px">ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-nvwumao"></use></svg> <span class="menu_word" style="font-size:17px">åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-zhifengche"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shejiaoxinxi"></use></svg> <span class="menu_word" style="font-size:17px">ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pengyouquan"></use></svg> <span class="menu_word" style="font-size:17px">æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-liuyan"></use></svg> <span class="menu_word" style="font-size:17px">ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-lianjie"></use></svg> <span class="menu_word" style="font-size:17px">å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-wangye"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--tongjibiao"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shujutongji1"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xianxingshalou"></use></svg> <span class="menu_word" style="font-size:17px">æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-maoliang"></use></svg> <span class="menu_word" style="font-size:17px">ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-qunliaotian"></use></svg> <span class="menu_word" style="font-size:17px">å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-love-sign"></use></svg> <span class="menu_word" style="font-size:17px">æ‹çˆ±å°å±‹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-paperplane"></use></svg> <span class="menu_word" style="font-size:17px">å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">LuckyBoyğŸ¥</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-home"></use></svg> <span class="menu_word" style="font-size:17px">é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--article"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-guidang1"></use></svg> <span class="menu_word" style="font-size:17px">å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-sekuaibiaoqian"></use></svg> <span class="menu_word" style="font-size:17px">æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-fenlei"></use></svg> <span class="menu_word" style="font-size:17px">åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pinweishenghuo"></use></svg> <span class="menu_word" style="font-size:17px">ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-yinle"></use></svg> <span class="menu_word" style="font-size:17px">å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-dianying1"></use></svg> <span class="menu_word" style="font-size:17px">å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-youxishoubing"></use></svg> <span class="menu_word" style="font-size:17px">æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xiangzi"></use></svg> <span class="menu_word" style="font-size:17px">å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-tubiaozhizuomoban"></use></svg> <span class="menu_word" style="font-size:17px">ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-nvwumao"></use></svg> <span class="menu_word" style="font-size:17px">åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-zhifengche"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shejiaoxinxi"></use></svg> <span class="menu_word" style="font-size:17px">ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-pengyouquan"></use></svg> <span class="menu_word" style="font-size:17px">æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-liuyan"></use></svg> <span class="menu_word" style="font-size:17px">ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-lianjie"></use></svg> <span class="menu_word" style="font-size:17px">å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-wangye"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon--tongjibiao"></use></svg> <span class="menu_word" style="font-size:17px">ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-shujutongji1"></use></svg> <span class="menu_word" style="font-size:17px">æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-xianxingshalou"></use></svg> <span class="menu_word" style="font-size:17px">æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-maoliang"></use></svg> <span class="menu_word" style="font-size:17px">ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-qunliaotian"></use></svg> <span class="menu_word" style="font-size:17px">å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-love-sign"></use></svg> <span class="menu_word" style="font-size:17px">æ‹çˆ±å°å±‹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.3em;height:1.3em;vertical-align:-.15em;fill:currentColor;overflow:hidden"><use xlink:href="#icon-paperplane"></use></svg> <span class="menu_word" style="font-size:17px">å…³äº</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg> <span>æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">åŸºäºxmlçš„Springåº”ç”¨</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº</span> <time class="post-meta-date-created" datetime="2023-04-24T09:05:49.000Z" title="å‘è¡¨äº 2023-04-24 17:05:49">2023-04-24</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-05-16T05:26:22.446Z" title="æ›´æ–°äº 2023-05-16 13:26:22">2023-05-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/Spring/">Spring</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">1.3w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>56åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="åŸºäºxmlçš„Springåº”ç”¨"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-SpringBeançš„é…ç½®è¯¦è§£">1. SpringBeançš„é…ç½®è¯¦è§£</h2><p>Springå¼€å‘ä¸­ä¸»è¦æ˜¯å¯¹Beançš„é…ç½®ï¼ŒBeançš„å¸¸ç”¨é…ç½®ä¸€è§ˆå¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left">Xmlé…ç½®æ–¹å¼</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;</code></td><td>Beançš„idå’Œå…¨é™å®šåé…ç½®</td></tr><tr><td style="text-align:left"><code>&lt;bean name=&quot;&quot;&gt;</code></td><td>é€šè¿‡nameè®¾ç½®Beançš„åˆ«åï¼Œé€šè¿‡åˆ«åä¹Ÿèƒ½ç›´æ¥è·å–åˆ°Beanå®ä¾‹</td></tr><tr><td style="text-align:left"><code>&lt;bean scope=&quot;&quot;&gt;</code></td><td>Beançš„ä½œç”¨èŒƒå›´ï¼ŒBeanFactoryä½œä¸ºå®¹å™¨æ—¶å–å€¼singletonå’Œprototype</td></tr><tr><td style="text-align:left"><code>&lt;bean lazy-init=&quot;&quot;&gt;</code></td><td>Beançš„å®ä¾‹åŒ–æ—¶æœºï¼Œæ˜¯å¦å»¶è¿ŸåŠ è½½ã€‚BeanFactoryä½œä¸ºå®¹å™¨æ—¶æ— æ•ˆ</td></tr><tr><td style="text-align:left"><code>&lt;bean init-method=&quot;&quot;&gt;</code></td><td>Beanå®ä¾‹åŒ–åè‡ªåŠ¨æ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•ï¼ŒmethodæŒ‡å®šæ–¹æ³•å</td></tr><tr><td style="text-align:left"><code>&lt;bean destroy-method=&quot;&quot;&gt;</code></td><td>Beanå®ä¾‹é”€æ¯å‰çš„æ–¹æ³•ï¼ŒmethodæŒ‡å®šæ–¹æ³•å</td></tr><tr><td style="text-align:left"><code>&lt;bean autowire=&quot;&quot;&gt;</code></td><td>è®¾ç½®è‡ªåŠ¨æ³¨å…¥æ¨¡å¼ï¼Œå¸¸ç”¨çš„æœ‰æŒ‰ç…§ç±»å‹byTypeï¼ŒæŒ‰ç…§åå­—byName</td></tr><tr><td style="text-align:left"><code>&lt;bean factory-bean=&quot;&quot; factory-method=&quot;&quot;/&gt;</code></td><td>æŒ‡å®šå“ªä¸ªå·¥å‚Beançš„å“ªä¸ªæ–¹æ³•å®ŒæˆBeançš„åˆ›å»º</td></tr></tbody></table><hr><h3 id="1-1-Beançš„åŸºç¡€é…ç½®">1.1 Beançš„åŸºç¡€é…ç½®</h3><p>ä¾‹å¦‚ï¼šé…ç½®UserDaoImplç”±Springå®¹å™¨è´Ÿè´£ç®¡ç†</p><p><code>&lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;/&gt;</code></p><p>æ­¤æ—¶å­˜å‚¨åˆ°Springå®¹å™¨ï¼ˆsingleObjectså•ä¾‹æ± ï¼‰ä¸­çš„Beançš„<code>beanName</code>æ˜¯userDaoï¼Œå€¼æ˜¯UserDaoImplå¯¹è±¡ï¼Œå¯ä»¥æ ¹æ®beanNameè·å–Beanå®ä¾‹</p><p><code>applicationContext.getBean(&quot;userDao&quot;);</code></p><p>å¦‚æœä¸é…ç½®idï¼Œåˆ™Springä¼šæŠŠå½“å‰Beanå®ä¾‹çš„å…¨é™å®šåä½œä¸º<code>beanName</code></p><p><code>applicationContext.getBean(&quot;com.itheima.dao.impl.UserDaoImpl&quot;);</code></p><hr><h3 id="1-2-Beançš„åˆ«åé…ç½®">1.2 Beançš„åˆ«åé…ç½®</h3><p>å¯ä»¥ä¸ºå½“å‰BeanæŒ‡å®šå¤šä¸ªåˆ«åï¼Œæ ¹æ®åˆ«åä¹Ÿå¯ä»¥è·å¾—Beanå¯¹è±¡</p><p><code>&lt;bean id=&quot;userDao&quot; name=&quot;aaa,bbb,ccc&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot;/&gt;</code></p><p>æ­¤æ—¶å¤šä¸ªåç§°éƒ½å¯ä»¥è·å¾—UserDaoImplå®ä¾‹å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">applicationContext.getBean(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">applicationContext.getBean(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">applicationContext.getBean(<span class="string">&quot;ccc&quot;</span>);</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424163859339.png" alt="image-20230424163859339"></p><hr><h3 id="1-3-Beançš„èŒƒå›´é…ç½®">1.3 Beançš„èŒƒå›´é…ç½®</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå•çº¯çš„Springç¯å¢ƒBeançš„ä½œç”¨èŒƒå›´æœ‰ä¸¤ä¸ªï¼š<code>Singleton</code>å’Œ<code>Prototype</code></p><ul><li><p><code>singleton</code>ï¼šå•ä¾‹ï¼Œé»˜è®¤å€¼ï¼ŒSpringå®¹å™¨åˆ›å»ºçš„æ—¶å€™ï¼Œå°±ä¼šè¿›è¡ŒBeançš„å®ä¾‹åŒ–ï¼Œå¹¶å­˜å‚¨åˆ°å®¹å™¨å†…éƒ¨çš„å•ä¾‹æ± ä¸­ï¼Œæ¯æ¬¡getBeanæ—¶éƒ½æ˜¯ä»å•ä¾‹æ± ä¸­è·å–ç›¸åŒçš„Beanå®ä¾‹ï¼›</p></li><li><p><code>prototype</code>ï¼šåŸå‹ï¼ŒSpringå®¹å™¨åˆå§‹åŒ–æ—¶ä¸ä¼šåˆ›å»ºBeanå®ä¾‹ï¼Œå½“è°ƒç”¨getBeanæ—¶æ‰ä¼šå®ä¾‹åŒ–Beanï¼Œæ¯æ¬¡getBeanéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanå®ä¾‹ã€‚</p></li></ul><div class="tabs" id="25d155c3-6343-4664-920b-58f09aaf9a33"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#25d155c3-6343-4664-920b-58f09aaf9a33-1"><i class="fas fa-atom"></i>è®¾ç½®ä¸ºsingletonæ—¶</button></li><li class="tab"><button type="button" data-href="#25d155c3-6343-4664-920b-58f09aaf9a33-2"><i class="far fa-sun"></i>è®¾ç½®ä¸ºprototypeæ—¶</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="25d155c3-6343-4664-920b-58f09aaf9a33-1"><p>å½“scopeè®¾ç½®ä¸ºsingletonæ—¶ï¼Œè·å¾—ä¸¤æ¬¡å¯¹è±¡æ‰“å°ç»“æœæ˜¯ä¸€æ ·çš„</p><p><code>&lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot; scope=&quot;singleton&quot;/&gt;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">userDao</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">userDao2</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">System.out.println(userDao);  <span class="comment">//com.itheima.dao.impl.UserDaoImpl@631330c</span></span><br><span class="line">System.out.println(userDao2); <span class="comment">//com.itheima.dao.impl.UserDaoImpl@631330c</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æ–­ç‚¹è°ƒè¯•ï¼Œè§‚å¯Ÿå¯ä»¥å‘ç°å•ä¾‹æ± ä¸­å­˜åœ¨userDaoå®ä¾‹</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423173834190.png" alt="image-20230423173834190" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="25d155c3-6343-4664-920b-58f09aaf9a33-2"><p>å½“scopeè®¾ç½®ä¸ºprototypeæ—¶ï¼Œè·å¾—ä¸¤æ¬¡å¯¹è±¡æ‰“å°ç»“æœæ˜¯ä¸ä¸€æ ·çš„</p><p><code>&lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot; scope=&quot;prototype&quot;/&gt;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">userDao</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">userDao2</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">System.out.println(userDao);  <span class="comment">//com.itheima.dao.impl.UserDaoImpl@4d50efb8</span></span><br><span class="line">System.out.println(userDao2); <span class="comment">//com.itheima.dao.impl.UserDaoImpl@7e2d773b</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æ–­ç‚¹è°ƒè¯•ï¼Œè§‚å¯Ÿå¯ä»¥å‘ç°å•ä¾‹æ± ä¸­ä¸å­˜åœ¨userDaoå®ä¾‹ï¼Œä½†æ˜¯userDaoçš„ä¿¡æ¯å·²ç»è¢«å­˜å‚¨åˆ°beanDefinitionMapä¸­äº†</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423173945599.png" alt="image-20230423173945599" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="1-4-Beançš„å»¶è¿ŸåŠ è½½">1.4 Beançš„å»¶è¿ŸåŠ è½½</h3><p>å½“lazy-initè®¾ç½®ä¸ºtrueæ—¶ä¸ºå»¶è¿ŸåŠ è½½ï¼Œä¹Ÿå°±æ˜¯å½“Springå®¹å™¨åˆ›å»ºçš„æ—¶å€™ï¼Œä¸ä¼šç«‹å³åˆ›å»ºBeanå®ä¾‹ï¼Œç­‰å¾…ç”¨åˆ°æ—¶åœ¨åˆ›å»ºBeanå®ä¾‹å¹¶å­˜å‚¨åˆ°å•ä¾‹æ± ä¸­å»ï¼Œåç»­åœ¨ä½¿ç”¨è¯¥Beanç›´æ¥ä»å•ä¾‹æ± è·å–å³å¯ï¼Œæœ¬è´¨ä¸Šè¯¥Beanè¿˜æ˜¯å•ä¾‹çš„</p><p><code>&lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot; lazy-init=&quot;true&quot;/&gt;</code></p><hr><h3 id="1-5-Beançš„åˆå§‹åŒ–é”€æ¯æ–¹æ³•é…ç½®">1.5 Beançš„åˆå§‹åŒ–é”€æ¯æ–¹æ³•é…ç½®</h3><p>Beanåœ¨è¢«å®ä¾‹åŒ–åï¼Œå¯ä»¥æ‰§è¡ŒæŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•å®Œæˆä¸€äº›åˆå§‹åŒ–çš„æ“ä½œï¼ŒBeanåœ¨é”€æ¯ä¹‹å‰ä¹Ÿå¯ä»¥æ‰§è¡ŒæŒ‡å®šçš„é”€æ¯æ–¹æ³•å®Œæˆä¸€äº›æ“ä½œï¼Œåˆå§‹åŒ–æ–¹æ³•åç§°å’Œé”€æ¯æ–¹æ³•åç§°é€šè¿‡</p><p><code>&lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.dao.impl.UserDaoImpl&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;/&gt;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImplåˆ›å»ºäº†...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–æ–¹æ³•...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é”€æ¯æ–¹æ³•...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰©å±•ï¼šé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å®ç°InitializingBeanæ¥å£ï¼Œå®Œæˆä¸€äº›Beançš„åˆå§‹åŒ–æ“ä½œï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>,InitializingBean &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserDaoImpl åˆ›å»ºäº†&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆå§‹åŒ–æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é”€æ¯æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ‰§è¡Œæ—¶æœºæ—©äº init method é…ç½®çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span> <span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot; InitializingBean...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="1-6-Beançš„å®ä¾‹åŒ–é…ç½®">1.6 Beançš„å®ä¾‹åŒ–é…ç½®</h3><p>Springçš„å®ä¾‹åŒ–æ–¹å¼ä¸»è¦å¦‚ä¸‹ä¸¤ç§ï¼š</p><ul><li><p>æ„é€ æ–¹å¼å®ä¾‹åŒ–ï¼šåº•å±‚é€šè¿‡æ„é€ æ–¹æ³•å¯¹Beanè¿›è¡Œå®ä¾‹åŒ–</p></li><li><p>å·¥å‚æ–¹å¼å®ä¾‹åŒ–ï¼šåº•å±‚é€šè¿‡è°ƒç”¨è‡ªå®šä¹‰çš„å·¥å‚æ–¹æ³•å¯¹Beanè¿›è¡Œå®ä¾‹åŒ–</p></li></ul><p>æ„é€ æ–¹å¼å®ä¾‹åŒ–Beanåˆåˆ†ä¸ºæ— å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–å’Œæœ‰å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–ï¼ŒSpringä¸­é…ç½®çš„<code>&lt;bean&gt;</code>å‡ ä¹éƒ½æ˜¯æ— å‚æ„é€ è¯¥æ–¹å¼ï¼Œæ­¤å¤„ä¸åœ¨èµ˜è¿°ã€‚ä¸‹é¢è®²è§£æœ‰å‚æ„é€ æ–¹æ³•å®ä¾‹åŒ–Bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æœ‰å‚æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">UserDaoImpl</span><span class="params">(String name)</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰å‚æ„é€ åœ¨å®ä¾‹åŒ–Beanæ—¶ï¼Œéœ€è¦å‚æ•°çš„æ³¨å…¥ï¼Œé€šè¿‡<code>&lt;constructor-arg&gt;</code>æ ‡ç­¾ï¼ŒåµŒå…¥åœ¨<code>&lt;bean&gt;</code>æ ‡ç­¾å†…éƒ¨æä¾›æ„é€ å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;haohao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å·¥å‚æ–¹å¼å®ä¾‹åŒ–Beanï¼Œåˆåˆ†ä¸ºå¦‚ä¸‹ä¸‰ç§ï¼š</p><ul><li><p>é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Bean</p></li><li><p>å®ä¾‹å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Bean</p></li><li><p>å®ç°FactoryBeanè§„èŒƒå»¶è¿Ÿå®ä¾‹åŒ–Bean</p></li></ul><div class="tabs" id="e67eb33f-cfdb-49fc-959f-2d57a6a55639"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#e67eb33f-cfdb-49fc-959f-2d57a6a55639-1"><i class="fas fa-cat"></i>é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Bean</button></li><li class="tab"><button type="button" data-href="#e67eb33f-cfdb-49fc-959f-2d57a6a55639-2"><i class="fas fa-horse"></i>å®ä¾‹å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Bean</button></li><li class="tab"><button type="button" data-href="#e67eb33f-cfdb-49fc-959f-2d57a6a55639-3"><i class="fas fa-dove"></i>å®ç°FactoryBeanè§„èŒƒå»¶è¿Ÿå®ä¾‹åŒ–Bean</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="e67eb33f-cfdb-49fc-959f-2d57a6a55639-1"><p>é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Beanï¼Œå…¶å®å°±æ˜¯å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ï¼Œæä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ç”¨äºç”Ÿäº§Beanå®ä¾‹ï¼Œåœ¨å°†è¯¥å·¥å‚ç±»åŠå…¶é™æ€æ–¹æ³•é…ç½®ç»™Springå³å¯</p><p><mark class="hl-label blue">é€šè¿‡å·¥å‚åˆ›å»ºbeanä¹‹å‰å¯ä»¥è¿›è¡Œä¸€äº›å…¶ä»–ä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œæ¯”è¾ƒçµæ´»ï¼Œä¾‹å¦‚è·å–ç¬¬ä¸‰æ–¹jaråŒ…çš„bean</mark></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å·¥å‚ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactoryBean</span> &#123;</span><br><span class="line">    <span class="comment">//éé™æ€å·¥å‚æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> UserDao <span class="title function_">getUserDao</span><span class="params">(String name)</span>&#123;</span><br><span class="line">    <span class="comment">//å¯ä»¥åœ¨æ­¤ç¼–å†™ä¸€äº›å…¶ä»–é€»è¾‘ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Beanï¼Œå…¶å®å°±æ˜¯å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ï¼Œæä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ç”¨äºç”Ÿäº§Beanå®ä¾‹ï¼Œåœ¨å°†è¯¥å·¥å‚ç±»åŠå…¶é™æ€æ–¹æ³•é…ç½®ç»™Springå³å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.UserDaoFactoryBean&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;haohao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>PSï¼š<code>&lt;constructor-arg&gt;</code>æ ‡ç­¾ä¸ä»…ä»…æ˜¯ä¸ºæ„é€ æ–¹æ³•ä¼ é€’å‚æ•°ï¼Œåªè¦æ˜¯ä¸ºäº†å®ä¾‹åŒ–å¯¹è±¡è€Œä¼ é€’çš„å‚æ•°éƒ½å¯ä»¥é€šè¿‡<code>&lt;constructor-arg&gt;</code>æ ‡ç­¾å®Œæˆï¼Œä¾‹å¦‚ä¸Šé¢é€šè¿‡é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–Beanæ‰€ä¼ é€’çš„å‚æ•°ä¹Ÿæ˜¯è¦é€šè¿‡<code>&lt;constructor-arg&gt;</code>è¿›è¡Œä¼ é€’çš„</p><p>æµ‹è¯•ä»£ç ï¼Œç›´æ¥é€šè¿‡ApplicationContextè·å¾—userDaoå³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">ClassPathxmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">userDao</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">System.out.println(userDao);</span><br></pre></td></tr></table></figure><p>æ–­ç‚¹è°ƒè¯•ï¼ŒUserDaoImplå®ä¾‹å¯¹è±¡ä¼šå­˜åœ¨äºå•ä¾‹æ± ä¸­</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423193549373.png" alt="image-20230423193549373" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="e67eb33f-cfdb-49fc-959f-2d57a6a55639-2"><p>å®ä¾‹å·¥å‚æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯éé™æ€å·¥å‚æ–¹æ³•äº§ç”ŸBeanå®ä¾‹ï¼Œä¸é™æ€å·¥å‚æ–¹å¼æ¯”è¾ƒï¼Œè¯¥æ–¹å¼éœ€è¦å…ˆæœ‰å·¥å‚å¯¹è±¡ï¼Œåœ¨ç”¨å·¥å‚å¯¹è±¡å»è°ƒç”¨éé™æ€æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œé…ç½®æ—¶ï¼Œè¦å…ˆé…ç½®å·¥å‚Beanï¼Œåœ¨é…ç½®ç›®æ ‡Bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¥å‚ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactoryBean2</span>&#123;</span><br><span class="line">    <span class="comment">//éé™æ€å·¥å‚æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getUserDao</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="comment">//å¯ä»¥åœ¨æ­¤ç¼–å†™ä¸€äº›å…¶ä»–é€»è¾‘ä»£ç </span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ä¾‹å·¥å‚æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯éé™æ€å·¥å‚æ–¹æ³•äº§ç”ŸBeanå®ä¾‹ï¼Œä¸é™æ€å·¥å‚æ–¹å¼æ¯”è¾ƒï¼Œè¯¥æ–¹å¼éœ€è¦å…ˆæœ‰å·¥å‚å¯¹è±¡ï¼Œåœ¨ç”¨å·¥å‚å¯¹è±¡å»è°ƒç”¨éé™æ€æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œé…ç½®æ—¶ï¼Œè¦å…ˆé…ç½®å·¥å‚Beanï¼Œåœ¨é…ç½®ç›®æ ‡Bean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®å®ä¾‹å·¥å‚Bean --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoFactoryBean2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.factory.UserDaoFactoryBean2&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®å®ä¾‹å·¥å‚Beançš„å“ªä¸ªæ–¹æ³•ä½œä¸ºå·¥å‚æ–¹æ³•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;userDaoFactoryBean2&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;haohao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç åŒä¸Šï¼Œç›´æ¥é€šè¿‡ApplicationContextè·å¾—userDaoå³å¯ï¼Œä¸åœ¨èµ˜è¿°</p><p>é€šè¿‡æ–­ç‚¹è§‚å¯Ÿå•ä¾‹æ± singletonObjectsï¼Œå‘ç°å•ä¾‹æ± ä¸­æ—¢æœ‰å·¥å‚Beanå®ä¾‹ï¼Œä¹Ÿæœ‰ç›®æ ‡Beanå®ä¾‹ï¼Œä¸”éƒ½æ˜¯åœ¨Springå®¹å™¨åˆ›å»ºæ—¶ï¼Œå°±å®Œæˆäº†Beançš„å®ä¾‹åŒ–</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423194001835.png" alt="image-20230423194001835" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="e67eb33f-cfdb-49fc-959f-2d57a6a55639-3"><p>ä¸Šé¢ä¸ç®¡æ˜¯é™æ€å·¥å‚æ–¹å¼è¿˜æ˜¯éé™æ€å·¥å‚æ–¹å¼ï¼Œéƒ½æ˜¯è‡ªå®šä¹‰çš„å·¥å‚æ–¹æ³•ï¼ŒSpringæä¾›äº†FactoryBeançš„æ¥å£è§„èŒƒï¼ŒFactoryBeanæ¥å£å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">FactoryBean</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">OBJECT_TYPE_ATTRIBUTE</span> <span class="operator">=</span> <span class="string">&quot;factoryBeanObjectType&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—å®ä¾‹å¯¹è±¡æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    T <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—å®ä¾‹å¯¹è±¡ç±»å‹æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    Class&lt;?&gt; getObjectType();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰å·¥å‚å®ç°FactoryBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoFactoryBean3</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;UserDao&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> UserDao <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType () &#123;</span><br><span class="line">            <span class="keyword">return</span> UserDao.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®FactoryBeanäº¤ç”±Springç®¡ç†å³å¯</p><p><code>&lt;bean id=&quot;userDao&quot; class=&quot;com.itheima.factory.UserDaoFactoryBean3&quot;/&gt;</code></p><p>é€šè¿‡Springå®¹å™¨æ ¹æ®beanNameå¯ä»¥æ­£å¸¸è·å¾—UserDaoImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">ClassPathxmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">userDao</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userDao&quot;</span>);</span><br><span class="line">System.out.println(userDao);</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ–­ç‚¹è§‚å¯Ÿå‘ç°Springå®¹å™¨åˆ›å»ºæ—¶ï¼ŒFactoryBeanè¢«å®ä¾‹åŒ–äº†ï¼Œå¹¶å­˜å‚¨åˆ°äº†å•ä¾‹æ± singletonObjectsä¸­ï¼Œä½†æ˜¯getObject() æ–¹æ³•å°šæœªè¢«æ‰§è¡Œï¼ŒUserDaoImplä¹Ÿæ²¡è¢«å®ä¾‹åŒ–ï¼Œå½“é¦–æ¬¡ç”¨åˆ°UserDaoImplæ—¶ï¼Œæ‰è°ƒç”¨getObject() ï¼Œæ­¤å·¥å‚æ–¹å¼äº§ç”Ÿçš„Beanå®ä¾‹ä¸ä¼šå­˜å‚¨åˆ°å•ä¾‹æ± singletonObjectsä¸­ï¼Œä¼šå­˜å‚¨åˆ°factoryBeanObjectCacheç¼“å­˜æ± ä¸­ï¼Œå¹¶ä¸”åæœŸæ¯æ¬¡ä½¿ç”¨åˆ°userDaoéƒ½ä»è¯¥ç¼“å­˜æ± ä¸­è¿”å›çš„æ˜¯åŒä¸€ä¸ªuserDaoå®ä¾‹ã€‚</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423194742761.png" alt="image-20230423194742761" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h3 id="1-7-Beançš„ä¾èµ–æ³¨å…¥é…ç½®">1.7 Beançš„ä¾èµ–æ³¨å…¥é…ç½®</h3><p>Beançš„ä¾èµ–æ³¨å…¥æœ‰ä¸¤ç§æ–¹å¼:</p><table><thead><tr><th>æ³¨å…¥æ–¹å¼</th><th>é…ç½®æ–¹å¼</th></tr></thead><tbody><tr><td>é€šè¿‡Beançš„setæ–¹æ³•æ³¨å…¥</td><td><code>&lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt;</code><br><code>&lt;property name=&quot;userDao&quot; value=&quot;haohao&quot;/&gt;</code></td></tr><tr><td>é€šè¿‡æ„é€ Beançš„æ–¹æ³•è¿›è¡Œæ³¨å…¥</td><td><code>&lt;constructor-argname=&quot;name&quot; ref=&quot;userDao&quot;/&gt;</code><br><code>&lt;constructor-argname=&quot;name&quot; value=&quot;haohao&quot;/&gt;</code></td></tr></tbody></table><p>å…¶ä¸­ï¼Œref æ˜¯reference çš„ç¼©å†™å½¢å¼ï¼Œç¿»è¯‘ä¸ºï¼šæ¶‰åŠï¼Œå‚è€ƒçš„æ„æ€ï¼Œç”¨äºå¼•ç”¨å…¶ä»–Beançš„idã€‚value ç”¨äºæ³¨å…¥æ™®é€šå±æ€§å€¼ã€‚</p><p>ä¾èµ–æ³¨å…¥çš„æ•°æ®ç±»å‹æœ‰å¦‚ä¸‹ä¸‰ç§ï¼š</p><p>æ™®é€šæ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ï¼šStringã€intã€booleanç­‰ï¼Œé€šè¿‡valueå±æ€§æŒ‡å®šã€‚</p><p>å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ï¼šUserDaoImplã€DataSourceç­‰ï¼Œé€šè¿‡refå±æ€§æŒ‡å®šã€‚</p><p>é›†åˆæ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ï¼šListã€Mapã€Propertiesç­‰ã€‚</p><div class="tabs" id="a553bb0c-fed5-43e5-b67f-081ec5172601"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#a553bb0c-fed5-43e5-b67f-081ec5172601-1"><i class="fas fa-cat"></i>æ³¨å…¥List<t>é›†åˆæ™®é€šæ•°æ®</t></button></li><li class="tab"><button type="button" data-href="#a553bb0c-fed5-43e5-b67f-081ec5172601-2"><i class="fas fa-horse"></i>æ³¨å…¥List<t>é›†åˆå¼•ç”¨æ•°æ®</t></button></li><li class="tab"><button type="button" data-href="#a553bb0c-fed5-43e5-b67f-081ec5172601-3"><i class="fas fa-dove"></i>æ³¨å…¥Set<t>é›†åˆ</t></button></li><li class="tab"><button type="button" data-href="#a553bb0c-fed5-43e5-b67f-081ec5172601-4"><i class="fas fa-dragon"></i>æ³¨å…¥Map<k ,v>é›†åˆ</k></button></li><li class="tab"><button type="button" data-href="#a553bb0c-fed5-43e5-b67f-081ec5172601-5"><i class="fas fa-heartbeat"></i>æ³¨å…¥Propertiesé”®å€¼å¯¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="a553bb0c-fed5-43e5-b67f-081ec5172601-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">setStrList</span> <span class="params">(List&lt;String&gt; strList)</span> &#123;</span><br><span class="line">    strList.forEach(str-&gt;&#123;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;strList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>haohao<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>niaoniao<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a553bb0c-fed5-43e5-b67f-081ec5172601-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setobiList</span><span class="params">(List&lt;UserDao&gt; objList)</span> &#123;</span><br><span class="line">    objList.forEach(obj -&gt; &#123;</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImp1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImp1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">list</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç›´æ¥å¼•ç”¨å®¹å™¨ä¸­å­˜åœ¨çš„Bean</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½® UserDao --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½® UserService--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;userDao2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;userDao3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a553bb0c-fed5-43e5-b67f-081ec5172601-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å…¥æ³›å‹ä¸ºå­—ç¬¦ä¸²çš„ Set é›†åˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValueSet</span><span class="params">(Set&lt;String&gt; valueSet)</span> &#123;</span><br><span class="line">    valueSet.forEach(str -&gt; &#123;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ³¨å…¥æ³›å‹ä¸ºå¯¹è±¡çš„ Set é›†åˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setObjSet</span><span class="params">(Set&lt;UserDao&gt; objSet)</span> &#123;</span><br><span class="line">    objSet.forEach(obj -&gt; &#123;</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨å…¥æ³›å‹ä¸ºå­—ç¬¦ä¸²çš„Seté›†åˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;valueSet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>muzi<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>muran<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ³¨å…¥æ³›å‹ä¸ºå¯¹è±¡çš„Seté›†åˆ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objSet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;userDao&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;userDao2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;userDao3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a553bb0c-fed5-43e5-b67f-081ec5172601-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å…¥å€¼ä¸ºå­—ç¬¦ä¸²çš„ Map é›†åˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValueMap</span><span class="params">(Map&lt;String, String&gt; valueMap)</span> &#123;</span><br><span class="line">    valueMap.forEach((k, v) -&gt; &#123;</span><br><span class="line">        System.out.println(k + <span class="string">&quot;==&quot;</span> + v);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å…¥å€¼ä¸ºå¯¹è±¡çš„ Map é›†åˆ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setObjMap</span><span class="params">(Map&lt;String, UserDao&gt; objMap)</span> &#123;</span><br><span class="line">    objMap.forEach((k, v) -&gt; &#123;</span><br><span class="line">        System.out.println(k + <span class="string">&quot;==&quot;</span> + v);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!- æ³¨å…¥å€¼ä¸ºå­—ç¬¦ä¸²çš„Mapé›†åˆ --&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;valueMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;aaa&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#x27;AAA&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;bbb&quot;</span> <span class="attr">value</span>=<span class="string">&quot;BBB&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;ccc&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ccc&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!- æ³¨å…¥å€¼ä¸ºå¯¹è±¡çš„Mapé›†åˆ --&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;ud&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;userDao&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;ud2&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;userDao2&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;ud3&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;userDao3&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="a553bb0c-fed5-43e5-b67f-081ec5172601-5"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å…¥ Properties</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties properties)</span>&#123;</span><br><span class="line">    properties.forEach((k,v)-&gt;&#123;</span><br><span class="line">    System.out.println( k+<span class="string">&quot;===&quot;</span>+v);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;xxx&quot;</span> &lt;/<span class="attr">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;yyy&quot;</span> &lt;/<span class="attr">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>æ‰©å±•ï¼šè‡ªåŠ¨è£…é…æ–¹å¼</p><p>å¦‚æœè¢«æ³¨å…¥çš„å±æ€§ç±»å‹æ˜¯Beanå¼•ç”¨çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨<code>&lt;bean&gt;</code>æ ‡ç­¾ä¸­ä½¿ç”¨autowireå±æ€§å»é…ç½®è‡ªåŠ¨æ³¨å…¥æ–¹å¼ï¼Œå±æ€§å€¼æœ‰ä¸¤ä¸ªï¼š</p><ul><li><p>byNameï¼šé€šè¿‡å±æ€§åè‡ªåŠ¨è£…é…ï¼Œå³å»åŒ¹é…setXxxä¸id=â€œxxxâ€ï¼ˆname=â€œxxxâ€ï¼‰æ˜¯å¦ä¸€è‡´ï¼›</p></li><li><p>byTypeï¼šé€šè¿‡Beançš„ç±»å‹ä»å®¹å™¨ä¸­åŒ¹é…ï¼ŒåŒ¹é…å‡ºå¤šä¸ªç›¸åŒBeanç±»å‹æ—¶ï¼ŒæŠ¥é”™ã€‚</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.UserServiceImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="1-8-Springçš„å…¶ä»–é…ç½®æ ‡ç­¾">1.8 Springçš„å…¶ä»–é…ç½®æ ‡ç­¾</h3><p>Spring çš„xmlæ ‡ç­¾å¤§ä½“ä¸Šåˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç§æ˜¯é»˜è®¤æ ‡ç­¾ï¼Œä¸€ç§æ˜¯è‡ªå®šä¹‰æ ‡ç­¾</p><p>é»˜è®¤æ ‡ç­¾ï¼šå°±æ˜¯ä¸ç”¨é¢å¤–å¯¼å…¥å…¶ä»–å‘½åç©ºé—´çº¦æŸçš„æ ‡ç­¾ï¼Œä¾‹å¦‚<code>&lt;bean&gt;</code>æ ‡ç­¾</p><p>è‡ªå®šä¹‰æ ‡ç­¾ï¼šå°±æ˜¯éœ€è¦é¢å¤–å¼•å…¥å…¶ä»–å‘½åç©ºé—´çº¦æŸï¼Œå¹¶é€šè¿‡å‰ç¼€å¼•ç”¨çš„æ ‡ç­¾ï¼Œä¾‹å¦‚<code>&lt;context:property-placeholder/&gt;</code> æ ‡ç­¾</p><p>Springçš„é»˜è®¤æ ‡ç­¾ç”¨åˆ°çš„æ˜¯Springçš„é»˜è®¤å‘½åç©ºé—´</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¯¥å‘½åç©ºé—´çº¦æŸä¸‹çš„é»˜è®¤æ ‡ç­¾å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æ ‡ç­¾</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>&lt;beans&gt;</code></td><td>ä¸€èˆ¬ä½œä¸ºxml é…ç½®æ ¹æ ‡ç­¾ï¼Œå…¶ä»–æ ‡ç­¾éƒ½æ˜¯è¯¥æ ‡ç­¾çš„å­æ ‡ç­¾</td></tr><tr><td><code>&lt;bean&gt;</code></td><td>Beançš„é…ç½®æ ‡ç­¾ï¼Œä¸Šé¢å·²ç»è¯¦è§£äº†ï¼Œæ­¤å¤„ä¸å†é˜è¿°</td></tr><tr><td><code>&lt;import&gt;</code></td><td>å¤–éƒ¨èµ„æºå¯¼å…¥æ ‡ç­¾</td></tr><tr><td><code>&lt;alias&gt;</code></td><td>æŒ‡å®šBeançš„åˆ«åæ ‡ç­¾ï¼Œä½¿ç”¨è¾ƒå°‘</td></tr></tbody></table><div class="tabs" id="98818658-50eb-4d2a-80b7-7de4192d3ffb"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#98818658-50eb-4d2a-80b7-7de4192d3ffb-1"><i class="fas fa-atom"></i>beansæ ‡ç­¾</button></li><li class="tab"><button type="button" data-href="#98818658-50eb-4d2a-80b7-7de4192d3ffb-2"><i class="far fa-sun"></i>importæ ‡ç­¾</button></li><li class="tab"><button type="button" data-href="#98818658-50eb-4d2a-80b7-7de4192d3ffb-3"><i class="fas fa-wind"></i>aliasæ ‡ç­¾</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="98818658-50eb-4d2a-80b7-7de4192d3ffb-1"><p>é™¤äº†ç»å¸¸ç”¨çš„åšä¸ºæ ¹æ ‡ç­¾å¤–ï¼Œè¿˜å¯ä»¥åµŒå¥—åœ¨æ ¹æ ‡ç­¾å†…ï¼Œä½¿ç”¨profileå±æ€§åˆ‡æ¢å¼€å‘ç¯å¢ƒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®æµ‹è¯•ç¯å¢ƒä¸‹ï¼Œéœ€è¦åŠ è½½çš„Beanå®ä¾‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">profile</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">                           </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®å¼€å‘ç¯å¢ƒä¸‹ï¼Œéœ€è¦åŠ è½½çš„ Bean å®ä¾‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">profile</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">       </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼æŒ‡å®šè¢«æ¿€æ´»çš„ç¯å¢ƒï¼š</p><ul><li><p>ä½¿ç”¨å‘½ä»¤è¡ŒåŠ¨æ€å‚æ•°ï¼Œè™šæ‹Ÿæœºå‚æ•°ä½ç½®åŠ è½½<code>-Dspring.profiles.active=test</code></p></li><li><p>ä½¿ç”¨ä»£ç çš„æ–¹å¼è®¾ç½®ç¯å¢ƒå˜é‡<code>System.setProperty(&quot;spring.profiles.active&quot;,&quot;test&quot;)</code></p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="98818658-50eb-4d2a-80b7-7de4192d3ffb-2"><p>ç”¨äºå¯¼å…¥å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œé¡¹ç›®å˜å¤§åï¼Œå°±ä¼šå¯¼è‡´ä¸€ä¸ªé…ç½®æ–‡ä»¶å†…å®¹è¿‡å¤šï¼Œå¯ä»¥å°†ä¸€ä¸ªé…ç½®æ–‡ä»¶æ ¹æ®ä¸šåŠ¡æŸå—è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†åï¼Œæœ€ç»ˆé€šè¿‡<import>æ ‡ç­¾å¯¼å…¥åˆ°ä¸€ä¸ªä¸»é…ç½®æ–‡ä»¶ä¸­ï¼Œé¡¹ç›®åŠ è½½ä¸»é…ç½®æ–‡ä»¶å°±è¿åŒ<code>&lt;import&gt;</code>å¯¼å…¥çš„æ–‡ä»¶ä¸€å¹¶åŠ è½½äº†</import></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥ç”¨æˆ·æ¨¡å—é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:UserModuleApplicationContext.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¯¼å…¥å•†å“æ¨¡å—é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:ProductModuleApplicationContext.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="98818658-50eb-4d2a-80b7-7de4192d3ffb-3"><p>ä¸ºæŸä¸ªBeanæ·»åŠ åˆ«åï¼Œä¸åœ¨<code>&lt;bean&gt;</code>æ ‡ç­¾ä¸Šä½¿ç”¨nameå±æ€§æ·»åŠ åˆ«åçš„æ–¹å¼ä¸€æ ·ï¼Œæˆ‘ä»¬ä¸ºUserServiceImplæŒ‡å®šå››ä¸ªåˆ«åï¼šaaaã€bbbã€xxxã€yyy</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½® UserService --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">name</span>=<span class="string">&quot;aaa,bbb&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æŒ‡å®šåˆ«å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;xxx&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;yyy&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>æ–­ç‚¹è°ƒè¯•ï¼Œåœ¨beanFactoryä¸­ç»´æŠ¤ç€ä¸€ä¸ªåä¸ºaliasMapçš„Map&lt;String,String&gt;é›†åˆï¼Œå­˜å‚¨åˆ«åå’ŒbeanNameä¹‹é—´çš„æ˜ å°„å…³ç³»</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423214921470.png" alt="image-20230423214921470" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>Springçš„è‡ªå®šä¹‰æ ‡ç­¾éœ€è¦å¼•å…¥å¤–éƒ¨çš„å‘½åç©ºé—´ï¼Œå¹¶ä¸ºå¤–éƒ¨çš„å‘½åç©ºé—´æŒ‡å®šå‰ç¼€ï¼Œä½¿ç”¨&lt;å‰ç¼€:æ ‡ç­¾&gt; å½¢å¼çš„æ ‡ç­¾ï¼Œç§°ä¹‹ä¸ºè‡ªå®šä¹‰æ ‡ç­¾ï¼Œè‡ªå®šä¹‰æ ‡ç­¾çš„è§£ææµç¨‹ä¹Ÿæ˜¯Spring xmlæ‰©å±•ç‚¹æ–¹å¼ä¹‹ä¸€ï¼Œåœ¨ã€ŠSpringæ•´åˆå…¶ä»–æ¡†æ¶ã€‹ç« èŠ‚è¿›è¡Œè¯¦ç»†ä»‹ç»</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é»˜è®¤æ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è‡ªå®šä¹‰æ ‡ç­¾ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context</span> <span class="attr">:property</span> <span class="attr">placeholder</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc</span> <span class="attr">:annotation</span> <span class="attr">driven</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo</span> <span class="attr">:application</span> <span class="attr">name</span>=<span class="string">&quot;application&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="2-Springçš„getæ–¹æ³•">2. Springçš„getæ–¹æ³•</h2><table><thead><tr><th>æ–¹æ³•å®šä¹‰</th><th>è¿”å›å€¼å’Œå‚æ•°</th></tr></thead><tbody><tr><td><code>Object getBean(String beanName)</code></td><td>æ ¹æ®beanNameä»å®¹å™¨ä¸­è·å–Beanå®ä¾‹ï¼Œè¦æ±‚å®¹å™¨ä¸­Beanå”¯ä¸€ï¼Œè¿”å›å€¼ä¸ºObjectï¼Œéœ€è¦å¼ºè½¬</td></tr><tr><td><code>T getBean (Class type)</code></td><td>æ ¹æ®Classç±»å‹ä»å®¹å™¨ä¸­è·å–Beanå®ä¾‹ï¼Œè¦æ±‚å®¹å™¨ä¸­Beanç±»å‹å”¯ä¸€ï¼Œè¿”å›å€¼ä¸ºClassç±»å‹å®ä¾‹ï¼Œæ— éœ€å¼ºè½¬</td></tr><tr><td><code>T getBean (String beanNameï¼ŒClass type)</code></td><td>æ ¹æ®beanNameä»å®¹å™¨ä¸­è·å¾—Beanå®ä¾‹ï¼Œè¿”å›å€¼ä¸ºClassç±»å‹å®ä¾‹ï¼Œæ— éœ€å¼ºè½¬</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ® beanName è·å–å®¹å™¨ä¸­çš„ Bean å®ä¾‹ï¼Œéœ€è¦æ‰‹åŠ¨å¼ºè½¬</span></span><br><span class="line"><span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) applicationContext.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line"><span class="comment">//æ ¹æ® Bean ç±»å‹å»å®¹å™¨ä¸­åŒ¹é…å¯¹åº”çš„ Bean å®ä¾‹ï¼Œå¦‚å­˜åœ¨å¤šä¸ªåŒ¹é… Bean åˆ™æŠ¥é”™</span></span><br><span class="line"><span class="type">UserService</span> <span class="variable">userService2</span> <span class="operator">=</span> applicationContext.getBean( UserService.class);</span><br><span class="line"><span class="comment">//æ ¹æ® beanName è·å–å®¹å™¨ä¸­çš„ Bean å®ä¾‹ï¼ŒæŒ‡å®š Bean çš„ Type ç±»å‹</span></span><br><span class="line"><span class="type">UserService</span> <span class="variable">userService3</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;userService&quot;</span>,UserService.class);</span><br></pre></td></tr></table></figure><hr><h2 id="3-Spring-é…ç½®éè‡ªå®šä¹‰Bean">3. Spring é…ç½®éè‡ªå®šä¹‰Bean</h2><p>ä»¥ä¸Šåœ¨xml ä¸­é…ç½®çš„Beanéƒ½æ˜¯è‡ªå·±å®šä¹‰çš„ï¼Œä¾‹å¦‚ï¼šUserDaoImplï¼ŒUserServiceImplã€‚ä½†æ˜¯ï¼Œåœ¨å®é™…å¼€å‘ä¸­æœ‰äº›åŠŸèƒ½ç±»å¹¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ï¼Œè€Œæ˜¯ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹jaråŒ…ä¸­çš„ï¼Œé‚£ä¹ˆï¼Œè¿™äº›Beanè¦æƒ³è®©Springè¿›è¡Œç®¡ç†ï¼Œä¹Ÿéœ€è¦å¯¹å…¶è¿›è¡Œé…ç½®</p><p>é…ç½®éè‡ªå®šä¹‰çš„Beanéœ€è¦è€ƒè™‘å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li><span class="p green">è¢«é…ç½®çš„Beançš„å®ä¾‹åŒ–æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿæ— å‚æ„é€ ã€æœ‰å‚æ„é€ ã€é™æ€å·¥å‚æ–¹å¼è¿˜æ˜¯å®ä¾‹å·¥å‚æ–¹å¼ï¼›</span></li><li><span class="p green">è¢«é…ç½®çš„Beanæ˜¯å¦éœ€è¦æ³¨å…¥å¿…è¦å±æ€§ã€‚</span></li></ul><div class="tabs" id="55b8c86c-f110-454d-be11-14d2cb2cbed3"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#55b8c86c-f110-454d-be11-14d2cb2cbed3-1"><i class="fas fa-cat"></i>1</button></li><li class="tab"><button type="button" data-href="#55b8c86c-f110-454d-be11-14d2cb2cbed3-2"><i class="fas fa-horse"></i>2</button></li><li class="tab"><button type="button" data-href="#55b8c86c-f110-454d-be11-14d2cb2cbed3-3"><i class="fas fa-dove"></i>3</button></li><li class="tab"><button type="button" data-href="#55b8c86c-f110-454d-be11-14d2cb2cbed3-4"><i class="fas fa-dragon"></i>4</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="55b8c86c-f110-454d-be11-14d2cb2cbed3-1"><p>1)é…ç½® Druid æ•°æ®æºäº¤ç”±Springç®¡ç†</p><p><mark class="hl-label green">å¯¼å…¥Druidåæ ‡</mark></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mysqlé©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.49<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- druidæ•°æ®æº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><mark class="hl-label blue">ä¼ ç»Ÿé…ç½®æ–¹å¼</mark></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">druidDataSource.setDriverClassName();</span><br><span class="line">druidDataSource.setUrl();</span><br><span class="line">druidDataSource.setUsername();</span><br><span class="line">druidDataSource.setPassword();</span><br></pre></td></tr></table></figure><p><mark class="hl-label green">é…ç½®DruidDataSourceäº¤ç”±Springç®¡ç†</mark></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½® DruidDataSourceæ•°æ®æº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®å¿…è¦å±æ€§--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="55b8c86c-f110-454d-be11-14d2cb2cbed3-2"><p>ä¼ ç»Ÿä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">DriverManager.getConnection(<span class="string">&quot;url&quot;</span>,<span class="string">&quot;user&quot;</span>,<span class="string">&quot;password&quot;</span>);</span><br></pre></td></tr></table></figure><p>2)é…ç½®Connectionäº¤ç”±Springç®¡ç†</p><p>Connection çš„äº§ç”Ÿæ˜¯é€šè¿‡DriverManagerçš„é™æ€æ–¹æ³•getConnectionè·å–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨é™æ€å·¥å‚æ–¹å¼é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;java.lang.Class&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;forName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;className&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;connection&quot;</span> <span class="attr">class</span>=<span class="string">&quot;java.sql.DriverManager&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getConnection&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///mybatis&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="55b8c86c-f110-454d-be11-14d2cb2cbed3-3"><p>3)é…ç½®æ—¥æœŸå¯¹è±¡äº¤ç”±Springç®¡ç†</p><p>äº§ç”Ÿä¸€ä¸ªæŒ‡å®šæ—¥æœŸæ ¼å¼çš„å¯¹è±¡ï¼ŒåŸå§‹ä»£ç æŒ‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">currentTimeStr</span> <span class="operator">=</span> <span class="string">&quot;2023-08-27 07:20:00&quot;</span>;</span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>); </span><br><span class="line"><span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> simpleDateFormat.parse(currentTimeStr);</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹æˆæ˜¯å®ä¾‹å·¥å‚æ–¹å¼ï¼Œä½¿ç”¨Springé…ç½®æ–¹å¼äº§ç”ŸDateå®ä¾‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;simpleDateFormat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;java.text.SimpleDateFormat&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;pattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;date&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;simpleDateFormat&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;parse&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;source&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2023-08-27 07:20:00&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="55b8c86c-f110-454d-be11-14d2cb2cbed3-4"><p>4)é…ç½®MyBatisçš„SqlSessionFactoryäº¤ç”±Springç®¡ç†</p><p><mark class="hl-label green">å¯¼å…¥MyBatisçš„ç›¸å…³åæ ‡</mark></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatisæ¡†æ¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mysqlé©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.49<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><mark class="hl-label green">MyBatisåŸå§‹è·å¾—SqlSessionFactoryçš„æ–¹å¼</mark></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨Springé™æ€å·¥å‚æ–¹å¼</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(â€œmybatis-conifg.xmlâ€); </span><br><span class="line"><span class="comment">//åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡ï¼Œä½¿ç”¨Springæ— å‚æ„é€ æ–¹å¼</span></span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="comment">//è°ƒç”¨SqlSessionFactoryBuilderçš„buildæ–¹æ³•ï¼Œä½¿ç”¨Springå®ä¾‹å·¥å‚æ–¹å¼</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> builder.build(in);</span><br></pre></td></tr></table></figure><p><mark class="hl-label green">SqlSessionFactoryäº¤ç”±Springç®¡ç†é…ç½®å¦‚ä¸‹</mark></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é™æ€å·¥å‚æ–¹å¼äº§ç”ŸBeanå®ä¾‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">â€œinputStreamâ€</span> <span class="attr">class</span>=<span class="string">â€œorg.apache.ibatis.io.Resourcesâ€</span> <span class="attr">factory-method</span>=<span class="string">â€œgetResourceAsStreamâ€</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">â€œresourceâ€</span> <span class="attr">value</span>=<span class="string">â€œmybatis-config.xml/</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ— å‚æ„é€ æ–¹å¼äº§ç”ŸBeanå®ä¾‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactoryBuilder&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.ibatis.session.SqlSessionFactoryBuilder&quot;</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--å®ä¾‹å·¥å‚æ–¹å¼äº§ç”ŸBeanå®ä¾‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;sqlSessionFactoryBuilder&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;build&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;inputStream&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;inputStream&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr><h2 id="4-Bean-å®ä¾‹åŒ–çš„åŸºæœ¬æµç¨‹">4. Bean å®ä¾‹åŒ–çš„åŸºæœ¬æµç¨‹</h2><p>Springå®¹å™¨åœ¨è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œä¼šå°†xmlé…ç½®çš„<code>&lt;bean&gt;</code>çš„ä¿¡æ¯å°è£…æˆä¸€ä¸ª<code>BeanDefinition</code>å¯¹è±¡ï¼Œæ‰€æœ‰çš„<code>BeanDefinition</code>å­˜å‚¨åˆ°ä¸€ä¸ªåä¸º<code>beanDefinitionMap</code>çš„Mapé›†åˆä¸­å»ï¼ŒSpringæ¡†æ¶åœ¨å¯¹è¯¥Mapè¿›è¡Œéå†ï¼Œä½¿ç”¨åå°„åˆ›å»ºBeanå®ä¾‹å¯¹è±¡ï¼Œåˆ›å»ºå¥½çš„Beanå¯¹è±¡å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º<code>singletonObjects</code>çš„Mapé›†åˆä¸­ï¼Œå½“è°ƒç”¨getBeanæ–¹æ³•æ—¶åˆ™æœ€ç»ˆä»è¯¥Mapé›†åˆä¸­å–å‡ºBeanå®ä¾‹å¯¹è±¡è¿”å›ã€‚</p><blockquote><p>Beanä¿¡æ¯å®šä¹‰å¯¹è±¡-BeanDefinition</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">lazy-init</span>=<span class="string">&quot;&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;&quot;</span> <span class="attr">abstract</span>=<span class="string">&quot;&quot;</span> <span class="attr">depends-on</span>=<span class="string">&quot;&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;&quot;</span>/&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿¡æ¯å°è£…=&gt;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeanDefinition</span> <span class="keyword">extends</span> <span class="title class_">AttributeAccessor</span>, BeanMetadataElement &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">SCOPE_SINGLETON</span> <span class="operator">=</span> <span class="string">&quot;singleton&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">SCOPE_PROTOTYPE</span> <span class="operator">=</span> <span class="string">&quot;prototype&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ROLE_APPLICATION</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ROLE_SUPPORT</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ROLE_INFRASTRUCTURE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setParentName</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getParentName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setBeanClassName</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getBeanClassName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setScope</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getScope</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setLazyInit</span><span class="params">(<span class="type">boolean</span> var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isLazyInit</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setDependsOn</span><span class="params">(<span class="meta">@Nullable</span> String... var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String[] getDependsOn();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setAutowireCandidate</span><span class="params">(<span class="type">boolean</span> var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAutowireCandidate</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setPrimary</span><span class="params">(<span class="type">boolean</span> var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isPrimary</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setFactoryBeanName</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getFactoryBeanName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setFactoryMethodName</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getFactoryMethodName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    ConstructorArgumentValues <span class="title function_">getConstructorArgumentValues</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">hasConstructorArgumentValues</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> !<span class="built_in">this</span>.getConstructorArgumentValues().isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    MutablePropertyValues <span class="title function_">getPropertyValues</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">hasPropertyValues</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> !<span class="built_in">this</span>.getPropertyValues().isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setInitMethodName</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getInitMethodName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setDestroyMethodName</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getDestroyMethodName</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setRole</span><span class="params">(<span class="type">int</span> var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">getRole</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(<span class="meta">@Nullable</span> String var1)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getDescription</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    ResolvableType <span class="title function_">getResolvableType</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isPrototype</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAbstract</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    String <span class="title function_">getResourceDescription</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    BeanDefinition <span class="title function_">getOriginatingBeanDefinition</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>DefaultListableBeanFactoryå¯¹è±¡å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªMapç”¨äºå­˜å‚¨å°è£…å¥½çš„BeanDefinitionMap</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultSingletonBeanRegistry</span> extends ... implements ... &#123;</span><br><span class="line">    <span class="comment">//å­˜å‚¨Beanå®ä¾‹çš„å•ä¾‹æ± </span></span><br><span class="line">    <span class="comment">//key:æ˜¯Beançš„beanNameï¼Œvalue:æ˜¯Beançš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; singletonObjects = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>(<span class="number">256</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Springæ¡†æ¶ä¼šå–å‡ºbeanDefinitionMapä¸­çš„æ¯ä¸ªBeanDefinitionä¿¡æ¯ï¼Œåå°„æ„é€ æ–¹æ³•æˆ–è°ƒç”¨æŒ‡å®šçš„å·¥å‚æ–¹æ³•ç”ŸæˆBeanå®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥<span class="p red">åªè¦å°†BeanDefinitionæ³¨å†Œåˆ°beanDefinitionMapè¿™ä¸ªMapä¸­ï¼ŒSpringå°±ä¼šè¿›è¡Œå¯¹åº”çš„Beançš„å®ä¾‹åŒ–æ“ä½œ</span></p><p>Beanå®ä¾‹åŠå•ä¾‹æ± singletonObjectsï¼Œ beanDefinitionMapä¸­çš„BeanDefinitionä¼šè¢«è½¬åŒ–æˆå¯¹åº”çš„Beanå®ä¾‹å¯¹è±¡ ï¼Œå­˜å‚¨åˆ°å•ä¾‹æ± singletonObjectsä¸­å»ï¼Œåœ¨DefaultListableBeanFactoryçš„ä¸Šå››çº§çˆ¶ç±»DefaultSingletonBeanRegistryä¸­ï¼Œç»´æŠ¤ç€singletonObjectsï¼Œæºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultSingletonBeanRegistry</span> extends ... implements ... &#123;</span><br><span class="line">  <span class="comment">//å­˜å‚¨Beanå®ä¾‹çš„å•ä¾‹æ± </span></span><br><span class="line">	<span class="comment">////key:æ˜¯Beançš„beanNameï¼Œvalue:æ˜¯Beançš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; singletonObjects = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>(<span class="number">256</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŠ è½½xmlé…ç½®æ–‡ä»¶ï¼Œè§£æè·å–é…ç½®ä¸­çš„æ¯ä¸ª<code>&lt;bean&gt;</code>çš„ä¿¡æ¯ï¼Œå°è£…æˆä¸€ä¸ªä¸ªçš„BeanDefinitionå¯¹è±¡;</li><li>å°†BeanDefinitionå­˜å‚¨åœ¨ä¸€ä¸ªåä¸ºbeanDefinitionMapçš„Map&lt;String,BeanDefinition&gt;ä¸­;</li><li>ApplicationContextåº•å±‚éå†beanDefinitionMapï¼Œåå°„åˆ›å»ºBeanå®ä¾‹å¯¹è±¡;</li><li>åˆ›å»ºå¥½çš„Beanå®ä¾‹å¯¹è±¡ï¼Œè¢«å­˜å‚¨åˆ°ä¸€ä¸ªåä¸ºsingletonObjectsçš„Map&lt;String,Object&gt;ä¸­;</li><li>å½“æ‰§è¡ŒapplicationContext.getBean(beanName)æ—¶ï¼Œä»singletonObjectså»åŒ¹é…Beanå®ä¾‹è¿”å›ã€‚</li></ul><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423222703341.png" alt="image-20230423222703341" style="zoom:67%"><hr><h2 id="5-Springçš„åå¤„ç†å™¨">5. Springçš„åå¤„ç†å™¨</h2><p>Springçš„åå¤„ç†å™¨æ˜¯Springå¯¹å¤–å¼€å‘çš„é‡è¦æ‰©å±•ç‚¹ï¼Œå…è®¸æˆ‘ä»¬ä»‹å…¥åˆ°Beançš„æ•´ä¸ªå®ä¾‹åŒ–æµç¨‹ä¸­æ¥ï¼Œä»¥è¾¾åˆ°åŠ¨æ€æ³¨å†ŒBeanDefinitionï¼ŒåŠ¨æ€ä¿®æ”¹BeanDefinitionï¼Œä»¥åŠåŠ¨æ€ä¿®æ”¹Beançš„ä½œç”¨ã€‚Springä¸»è¦æœ‰ä¸¤ç§åå¤„ç†å™¨ï¼š</p><ul><li>BeanFactoryPostProcessorï¼šBeanå·¥å‚åå¤„ç†å™¨ï¼Œåœ¨BeanDefinitionMapå¡«å……å®Œæ¯•ï¼ŒBeanå®ä¾‹åŒ–ä¹‹å‰æ‰§è¡Œï¼›</li><li>BeanPostProcessorï¼šBeanåå¤„ç†å™¨ï¼Œä¸€èˆ¬åœ¨Beanå®ä¾‹åŒ–ä¹‹åï¼Œå¡«å……åˆ°å•ä¾‹æ± singletonObjectsä¹‹å‰æ‰§è¡Œã€‚</li></ul><hr><h3 id="5-1-BeanFactoryPostProcessor">5.1 BeanFactoryPostProcessor</h3><p>BeanFactoryPostProcessoræ˜¯ä¸€ä¸ªæ¥å£è§„èŒƒï¼Œå®ç°äº†è¯¥æ¥å£çš„ç±»åªè¦äº¤ç”±Springå®¹å™¨ç®¡ç†çš„è¯ï¼Œé‚£ä¹ˆSpringå°±ä¼šå›è°ƒè¯¥æ¥å£çš„æ–¹æ³•ã€‚ç”¨äºå¯¹BeanDefinitionæ³¨å†Œå’Œä¿®æ”¹çš„åŠŸèƒ½ã€‚BeanFactoryPostProcessor å®šä¹‰å¦‚ä¸‹ï¼š</p><blockquote><p>å®¹å™¨ä¼šæ£€æŸ¥æ¯ä¸ªbeanå®šä¹‰ï¼Œä»¥ç¡®å®šæ˜¯å¦æœ‰å®ç°<code>BeanFactoryPostProcessor</code>æ¥å£çš„ç±»ã€‚å¯¹äºå®ç°äº†<code>BeanFactoryPostProcessor</code>æ¥å£çš„beanï¼Œå®¹å™¨å°†å®ä¾‹åŒ–å®ƒä»¬å­˜å‚¨åˆ°å•ä¾‹æ± ä¸­å¹¶è°ƒç”¨å…¶<code>postProcessBeanFactory()</code>æ–¹æ³•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>BeanFactoryPostProcessor</code>çš„å®ä¾‹åŒ–å’Œæ‰§è¡Œä¼šåœ¨å…¶ä»–æ™®é€šbeanå®ä¾‹åŒ–ä¹‹å‰å®Œæˆã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeanFactoryPostProcessor</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><mark class="hl-label blue">ç¼–å†™BeanFactoryPostProcessor</mark><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanFactoryPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanFactoryPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyBeanFactoryPostProcessoræ‰§è¡Œäº†...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><mark class="hl-label blue">é…ç½®BeanFactoryPostProcessor</mark><p><code>&lt;bean class=&quot;com.itheima.processor.MyBeanFactoryPostProcessor&quot;/&gt;</code></p><p>postProcessBeanFactoryå‚æ•°æœ¬è´¨å°±æ˜¯DefaultListableBeanFactoryï¼Œæ‹¿åˆ°BeanFactoryçš„å¼•ç”¨ï¼Œè‡ªç„¶å°±å¯ä»¥å¯¹beanDefinitionMapä¸­çš„BeanDefinitionè¿›è¡Œæ“ä½œäº†ï¼Œä¾‹å¦‚å¯¹UserDaoImplçš„BeanDefinitionè¿›è¡Œä¿®æ”¹æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanFactoryPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanFactoryPostProcessor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory beanFactory)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="type">BeanDefinition</span> <span class="variable">userDaoBD</span> <span class="operator">=</span> beanFactory.getBeanDefinition(â€œuserDaoâ€);<span class="comment">//è·å¾—UserDaoå®šä¹‰å¯¹è±¡</span></span><br><span class="line">        userDaoBD.setBeanClassName(<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl2&quot;</span>); <span class="comment">//ä¿®æ”¹class</span></span><br><span class="line">        <span class="comment">//userDaoBD.setInitMethodName(methodName); //ä¿®æ”¹åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//userDaoBD.setLazyInit(true); //ä¿®æ”¹æ˜¯å¦æ‡’åŠ è½½</span></span><br><span class="line">        <span class="comment">//... çœç•¥å…¶ä»–çš„è®¾ç½®æ–¹å¼ ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å·²ç»å¯¹æŒ‡å®šçš„BeanDefinitionè¿›è¡Œäº†ä¿®æ”¹æ“ä½œï¼Œä¸‹é¢å¯¹BeanDefiitionè¿›è¡Œæ³¨å†Œæ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanFactoryPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanFactoryPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory configurableListableBeanFactory)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="comment">//å¼ºè½¬æˆå­ç±»DefaultListableBeanFactory</span></span><br><span class="line">        <span class="keyword">if</span> (configurableListableBeanFactory <span class="keyword">instanceof</span> DefaultListableBeanFactory) &#123;</span><br><span class="line">            <span class="type">DefaultListableBeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> (DefaultListableBeanFactory) configurableListableBeanFactory;</span><br><span class="line">            <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>();</span><br><span class="line">            beanDefinition.setBeanClassName(<span class="string">&quot;com.itheima.dao.UserDaoImpl2&quot;</span>);</span><br><span class="line">            <span class="comment">//è¿›è¡Œæ³¨å†Œæ“ä½œ</span></span><br><span class="line">            beanFactory.registerBeanDefinition(<span class="string">&quot;userDao2&quot;</span>, beanDefinition);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Spring æä¾›äº†ä¸€ä¸ªBeanFactoryPostProcessorçš„å­æ¥å£BeanDefinitionRegistryPostProcessorä¸“é—¨ç”¨äºæ³¨å†ŒBeanDefinitionæ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanFactoryPostProcessor2</span> <span class="keyword">implements</span> <span class="title class_">BeanDefinitionRegistryPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanFactory</span><span class="params">(ConfigurableListableBeanFactory configurableListableBeanFactory)</span> <span class="keyword">throws</span> BeansException &#123;&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry beanDefinitionRegistry)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>();</span><br><span class="line">        beanDefinition.setBeanClassName(<span class="string">&quot;com.itheima.dao.UserDaoImpl2&quot;</span>);</span><br><span class="line">        beanDefinitionRegistry.registerBeanDefinition(<span class="string">&quot;userDao2&quot;</span>,beanDefinition);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424215830258.png" alt="image-20230424215830258" style="zoom:67%"><p>BeanFactoryPostProcessoråœ¨SpringBeançš„å®ä¾‹åŒ–è¿‡ç¨‹ä¸­çš„ä½“ç°</p><blockquote><p>æ¡ˆä¾‹ï¼šä½¿ç”¨Springçš„BeanFactoryPostProcessoræ‰©å±•ç‚¹å®Œæˆè‡ªå®šä¹‰æ³¨è§£æ‰«æ</p></blockquote><div class="tabs" id="7dacba6b-844c-4cf2-9dca-00983f8d5747"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#7dacba6b-844c-4cf2-9dca-00983f8d5747-1"><i class="fas fa-cat"></i>è¦æ±‚</button></li><li class="tab"><button type="button" data-href="#7dacba6b-844c-4cf2-9dca-00983f8d5747-2"><i class="fas fa-horse"></i>BaseClassScanUtils</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="7dacba6b-844c-4cf2-9dca-00983f8d5747-1"><p>è¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>è‡ªå®šä¹‰@MyComponentæ³¨è§£ï¼Œä½¿ç”¨åœ¨ç±»ä¸Šï¼›</li><li>ä½¿ç”¨èµ„æ–™ä¸­æä¾›å¥½çš„æ‰«æå™¨å·¥å…·BaseClassScanUtils å®ŒæˆæŒ‡å®šåŒ…çš„ç±»æ‰«æï¼›</li><li>è‡ªå®šä¹‰BeanFactoryPostProcessorå®Œæˆæ³¨è§£@MyComponentçš„è§£æï¼Œè§£æåæœ€ç»ˆè¢«Springç®¡ç†ã€‚</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="7dacba6b-844c-4cf2-9dca-00983f8d5747-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.support.PathMatchingResourcePatternResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.support.ResourcePatternResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.classreading.CachingMetadataReaderFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.classreading.MetadataReader;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.classreading.MetadataReaderFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.ClassUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseClassScanUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®èµ„æºè§„åˆ™</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RESOURCE_PATTERN</span> <span class="operator">=</span> <span class="string">&quot;//.class&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, Class&gt; <span class="title function_">scanMyComponentAnnotation</span><span class="params">(String basePackage)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºå®¹å™¨å­˜å‚¨ä½¿ç”¨äº†æŒ‡å®šæ³¨è§£çš„Beanå­—èŠ‚ç å¯¹è±¡</span></span><br><span class="line">        Map&lt;String, Class&gt; annotationClassMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Class&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//springå·¥å…·ç±»ï¼Œå¯ä»¥è·å–æŒ‡å®šè·¯å¾„ä¸‹çš„å…¨éƒ¨ç±»</span></span><br><span class="line">        <span class="type">ResourcePatternResolver</span> <span class="variable">resourcePatternResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PathMatchingResourcePatternResolver</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">pattern</span> <span class="operator">=</span> ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX +</span><br><span class="line">                    ClassUtils.convertClassNameToResourcePath(basePackage) + RESOURCE_PATTERN;</span><br><span class="line">            Resource[] resources = resourcePatternResolver.getResources(pattern);</span><br><span class="line">            <span class="comment">//MetadataReader çš„å·¥å‚ç±»</span></span><br><span class="line">            <span class="type">MetadataReaderFactory</span> <span class="variable">refractory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CachingMetadataReaderFactory</span>(resourcePatternResolver);</span><br><span class="line">            <span class="keyword">for</span> (Resource resource : resources) &#123;</span><br><span class="line">                <span class="comment">//ç”¨äºè¯»å–ç±»ä¿¡æ¯</span></span><br><span class="line">                <span class="type">MetadataReader</span> <span class="variable">reader</span> <span class="operator">=</span> refractory.getMetadataReader(resource);</span><br><span class="line">                <span class="comment">//æ‰«æåˆ°çš„class</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">classname</span> <span class="operator">=</span> reader.getClassMetadata().getClassName();</span><br><span class="line">                Class&lt;?&gt; clazz = Class.forName(classname);</span><br><span class="line">                <span class="comment">//åˆ¤æ–­æ˜¯å¦å±äºæŒ‡å®šçš„æ³¨è§£ç±»å‹</span></span><br><span class="line">                <span class="keyword">if</span>(clazz.isAnnotationPresent(MyComponent.class))&#123;</span><br><span class="line">                    <span class="comment">//è·å¾—æ³¨è§£å¯¹è±¡</span></span><br><span class="line">                    <span class="type">MyComponent</span> <span class="variable">annotation</span> <span class="operator">=</span> clazz.getAnnotation(MyComponent.class);</span><br><span class="line">                    <span class="comment">//è·å¾—å±valueå±æ€§å€¼</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">beanName</span> <span class="operator">=</span> annotation.value();</span><br><span class="line">                    <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸º&quot;&quot;</span></span><br><span class="line">                    <span class="keyword">if</span>(beanName!=<span class="literal">null</span>&amp;&amp;!beanName.equals(<span class="string">&quot;&quot;</span>))&#123;</span><br><span class="line">                        <span class="comment">//å­˜å‚¨åˆ°Mapä¸­å»</span></span><br><span class="line">                        annotationClassMap.put(beanName,clazz);</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//å¦‚æœæ²¡æœ‰ä¸º&quot;&quot;,é‚£å°±æŠŠå½“å‰ç±»çš„ç±»åä½œä¸ºbeanName</span></span><br><span class="line">                    annotationClassMap.put(clazz.getSimpleName(),clazz);</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception exception) &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> annotationClassMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Map&lt;String, Class&gt; stringClassMap = scanMyComponentAnnotation(<span class="string">&quot;com.itheima&quot;</span>);</span><br><span class="line">        System.out.println(stringClassMap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>è‡ªå®šä¹‰@MyComponentæ³¨è§£ï¼Œä½¿ç”¨åœ¨ç±»ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyComponent &#123;</span><br><span class="line">  <span class="comment">//æ˜¾ç¤ºçš„æŒ‡å®šBeançš„beanName</span></span><br><span class="line">	String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç±»ä¸Šä½¿ç”¨@MyComponent</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MyComponent(&quot;otherBean&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OtherBean</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰BeanFactoryPostProcessorå®Œæˆæ³¨è§£è§£æ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">    <span class="comment">//æŒ‡å®šè¦æ‰«æçš„åŒ…</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">basePackage</span> <span class="operator">=</span> <span class="string">&quot;com.itheima&quot;</span>;</span><br><span class="line">    <span class="comment">//è°ƒç”¨æ‰«æå·¥å…·æ‰«ææŒ‡å®šåŒ…åŠå…¶å­åŒ…ä¸‹çš„@MyComponent</span></span><br><span class="line">    Map&lt;String, Class&gt; myComponentClassMap = BaseClassScanUtils.scanMyComponentAnnotation(basePackage);</span><br><span class="line">    <span class="comment">//éå†Mapé›†åˆï¼Œåˆ›å»ºBeanDefinitionå¯¹è±¡è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line">    myComponentClassMap.forEach((beanName,clazz)-&gt;&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>();</span><br><span class="line">            beanDefinition.setBeanClassName(clazz.getName());</span><br><span class="line">            registry.registerBeanDefinition(beanName,beanDefinition);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="5-2-BeanPostProcessor">5.2 BeanPostProcessor</h3><p>Beanè¢«å®ä¾‹åŒ–åï¼Œåˆ°æœ€ç»ˆç¼“å­˜åˆ°åä¸ºsingletonObjectså•ä¾‹æ± ä¹‹å‰ï¼Œä¸­é—´ä¼šç»è¿‡Beançš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œä¾‹å¦‚ï¼šå±æ€§çš„å¡«å……ã€åˆå§‹æ–¹æ³•initçš„æ‰§è¡Œç­‰ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå¯¹å¤–è¿›è¡Œæ‰©å±•çš„ç‚¹BeanPostProcessorï¼Œæˆ‘ä»¬ç§°ä¸º<code>Beanåå¤„ç†å™¨</code>ã€‚è·Ÿä¸Šé¢çš„<code>Beanå·¥å‚åå¤„ç†å™¨</code>ç›¸ä¼¼ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ç°äº†è¯¥æ¥å£å¹¶è¢«å®¹å™¨ç®¡ç†çš„BeanPostProcessorï¼Œä¼šåœ¨æµç¨‹èŠ‚ç‚¹ä¸Šè¢«Springè‡ªåŠ¨è°ƒç”¨ã€‚</p><p>BeanPostProcessorçš„æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="comment">//åœ¨å±æ€§æ³¨å…¥å®Œæ¯•ï¼Œinitåˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œä¹‹å‰è¢«å›è°ƒ</span></span><br><span class="line">    <span class="keyword">default</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="comment">//åœ¨åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œä¹‹åï¼Œè¢«æ·»åŠ åˆ°å•ä¾‹æ± singletonObjectsä¹‹å‰è¢«å›è°ƒ</span></span><br><span class="line">    <span class="keyword">default</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="tabs" id="58f502e6-72ed-483a-970c-d5e3ccc5138f"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#58f502e6-72ed-483a-970c-d5e3ccc5138f-1"><i class="fas fa-bug"></i>è‡ªå®šä¹‰MyBeanPostProcessor</button></li><li class="tab"><button type="button" data-href="#58f502e6-72ed-483a-970c-d5e3ccc5138f-2"><i class="fas fa-cannabis"></i>bean</button></li><li class="tab"><button type="button" data-href="#58f502e6-72ed-483a-970c-d5e3ccc5138f-3"><i class="fas fa-candy-cane"></i>é…ç½®MyBeanPostProcessorå’Œbean</button></li><li class="tab"><button type="button" data-href="#58f502e6-72ed-483a-970c-d5e3ccc5138f-4"><i class="fas fa-child"></i>è¾“å‡º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="58f502e6-72ed-483a-970c-d5e3ccc5138f-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="comment">//å‚æ•°ï¼š beanæ˜¯å½“å‰è¢«å®ä¾‹åŒ–çš„Beanï¼ŒbeanNameæ˜¯å½“å‰Beanå®ä¾‹åœ¨å®¹å™¨ä¸­çš„åç§°è¿”å›å€¼ï¼šå½“å‰Beanå®ä¾‹å¯¹è±¡ </span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BeanPostProcessorçš„beforeæ–¹æ³•...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‚æ•°ï¼š beanæ˜¯å½“å‰è¢«å®ä¾‹åŒ–çš„Beanï¼ŒbeanNameæ˜¯å½“å‰Beanå®ä¾‹åœ¨å®¹å™¨ä¸­çš„åç§°è¿”å›å€¼ï¼šå½“å‰Beanå®ä¾‹å¯¹è±¡ </span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BeanPostProcessorçš„afteræ–¹æ³•...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="58f502e6-72ed-483a-970c-d5e3ccc5138f-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>, InitializingBean &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserDaoImpl</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;userDaoåˆ›å»º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;initåˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å±æ€§è®¾ç½®ä¹‹åæ‰§è¡Œ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="58f502e6-72ed-483a-970c-d5e3ccc5138f-3"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.processor.MyBeanPostProcessor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="58f502e6-72ed-483a-970c-d5e3ccc5138f-4"><p>æµ‹è¯•æ§åˆ¶å°æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UserDaoImplåˆ›å»ºäº†... </span><br><span class="line">BeanPostProcessorçš„beforeæ–¹æ³•... </span><br><span class="line">UserDaoImplå±æ€§å¡«å……...</span><br><span class="line">UserDaoImplåˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œ...</span><br><span class="line">BeanPostProcessorçš„afteræ–¹æ³•...</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>æ¡ˆä¾‹ï¼šå¯¹Beanæ–¹æ³•è¿›è¡Œæ‰§è¡Œæ—¶é—´æ—¥å¿—å¢å¼º</p></blockquote><div class="tabs" id="614a8299-edfc-4f4b-84ad-56c9e3409235"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#614a8299-edfc-4f4b-84ad-56c9e3409235-1"><i class="fas fa-cat"></i>è¦æ±‚</button></li><li class="tab"><button type="button" data-href="#614a8299-edfc-4f4b-84ad-56c9e3409235-2"><i class="fas fa-horse"></i>åˆ†æ</button></li><li class="tab"><button type="button" data-href="#614a8299-edfc-4f4b-84ad-56c9e3409235-3"><i class="fas fa-dove"></i>å®ç°</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="614a8299-edfc-4f4b-84ad-56c9e3409235-1"><p>è¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li>Beançš„æ–¹æ³•æ‰§è¡Œä¹‹å‰æ§åˆ¶å°æ‰“å°å½“å‰æ—¶é—´ï¼›</li><li>Beançš„æ–¹æ³•æ‰§è¡Œä¹‹åæ§åˆ¶å°æ‰“å°å½“å‰æ—¶é—´ã€‚</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="614a8299-edfc-4f4b-84ad-56c9e3409235-2"><p>åˆ†æï¼š</p><ul><li>å¯¹æ–¹æ³•è¿›è¡Œå¢å¼ºä¸»è¦å°±æ˜¯ä»£ç†è®¾è®¡æ¨¡å¼å’ŒåŒ…è£…è®¾è®¡æ¨¡å¼ï¼›</li><li>ç”±äºBeanæ–¹æ³•ä¸ç¡®å®šï¼Œæ‰€ä»¥ä½¿ç”¨åŠ¨æ€ä»£ç†åœ¨è¿è¡ŒæœŸé—´æ‰§è¡Œå¢å¼ºæ“ä½œï¼›</li><li>åœ¨Beanå®ä¾‹åˆ›å»ºå®Œæ¯•åï¼Œè¿›å…¥åˆ°å•ä¾‹æ± ä¹‹å‰ï¼Œä½¿ç”¨Proxyä»£æ›¿çœŸæ˜¯çš„ç›®æ ‡Bean</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="614a8299-edfc-4f4b-84ad-56c9e3409235-3"><p>ç¼–å†™BeanPostProcessorï¼Œå¢å¼ºé€»è¾‘ç¼–å†™åœ¨afteræ–¹æ³•ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeLogBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨åŠ¨æ€ä»£ç†å¯¹ç›®æ ‡Beanè¿›è¡Œå¢å¼ºï¼Œè¿”å›proxyå¯¹è±¡ï¼Œè¿›è€Œå­˜å‚¨åˆ°å•ä¾‹æ± singletonObjectsä¸­</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">beanProxy</span> <span class="operator">=</span> Proxy.newProxyInstance(</span><br><span class="line">                bean.getClass().getClassLoader(),</span><br><span class="line">                bean.getClass().getInterfaces(),</span><br><span class="line">                (proxy, method, args) -&gt; &#123;</span><br><span class="line">                    <span class="comment">//1ã€è¾“å‡ºå¼€å§‹æ—¶é—´</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;æ–¹æ³•ï¼š&quot;</span> + method.getName() + <span class="string">&quot;-å¼€å§‹æ—¶é—´ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">                    <span class="comment">//2ã€æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span><br><span class="line">                    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(bean, args);</span><br><span class="line">                    <span class="comment">//3ã€è¾“å‡ºç»“æŸæ—¶é—´</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;æ–¹æ³•ï¼š&quot;</span> + method.getName() + <span class="string">&quot;-ç»“æŸæ—¶é—´ï¼š&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> result;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> beanProxy;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®åˆ°spring</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.processor.TimeLogBeanPostProcessor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230425091408067.png" alt="image-20230425091408067" style="zoom:67%"><p>BeanPostProcessor åœ¨ SpringBeançš„å®ä¾‹åŒ–è¿‡ç¨‹ä¸­çš„ä½“ç°</p><hr><h2 id="6-Spring-Beançš„ç”Ÿå‘½å‘¨æœŸ">6. Spring Beançš„ç”Ÿå‘½å‘¨æœŸ</h2><p>Spring Beançš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä» Bean å®ä¾‹åŒ–ä¹‹åï¼Œå³é€šè¿‡åå°„åˆ›å»ºå‡ºå¯¹è±¡ä¹‹åï¼Œåˆ°Beanæˆä¸ºä¸€ä¸ªå®Œæ•´å¯¹è±¡ï¼Œæœ€ç»ˆå­˜å‚¨åˆ°å•ä¾‹æ± ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºSpring Beançš„ç”Ÿå‘½å‘¨æœŸã€‚Spring Beançš„ç”Ÿå‘½å‘¨æœŸå¤§ä½“ä¸Šåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>Beançš„å®ä¾‹åŒ–é˜¶æ®µï¼šSpringæ¡†æ¶ä¼šå–å‡ºBeanDefinitionçš„ä¿¡æ¯è¿›è¡Œåˆ¤æ–­å½“å‰Beançš„èŒƒå›´æ˜¯å¦æ˜¯singletonçš„ï¼Œæ˜¯å¦ä¸æ˜¯å»¶è¿ŸåŠ è½½çš„ï¼Œæ˜¯å¦ä¸æ˜¯FactoryBeanç­‰ï¼Œæœ€ç»ˆå°†ä¸€ä¸ªæ™®é€šçš„singletonçš„Beané€šè¿‡åå°„è¿›è¡Œå®ä¾‹åŒ–ï¼›</li><li>Beançš„åˆå§‹åŒ–é˜¶æ®µï¼šBeanåˆ›å»ºä¹‹åè¿˜ä»…ä»…æ˜¯ä¸ª&quot;åŠæˆå“&quot;ï¼Œè¿˜éœ€è¦å¯¹Beanå®ä¾‹çš„å±æ€§è¿›è¡Œå¡«å……ã€æ‰§è¡Œä¸€äº›Awareæ¥å£æ–¹æ³•ã€æ‰§è¡ŒBeanPostProcessoræ–¹æ³•ã€æ‰§è¡ŒInitializingBeanæ¥å£çš„åˆå§‹åŒ–æ–¹æ³•ã€æ‰§è¡Œè‡ªå®šä¹‰åˆå§‹åŒ–initæ–¹æ³•ç­‰ã€‚è¯¥é˜¶æ®µæ˜¯Springæœ€å…·æŠ€æœ¯å«é‡å’Œå¤æ‚åº¦çš„é˜¶æ®µï¼ŒAopå¢å¼ºåŠŸèƒ½ï¼Œåé¢è¦å­¦ä¹ çš„Springçš„æ³¨è§£åŠŸèƒ½ç­‰ã€ springé«˜é¢‘é¢è¯•é¢˜Beançš„å¾ªç¯å¼•ç”¨é—®é¢˜éƒ½æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µä½“ç°çš„ï¼›</li><li>Beançš„å®Œæˆé˜¶æ®µï¼šç»è¿‡åˆå§‹åŒ–é˜¶æ®µï¼ŒBeanå°±æˆä¸ºäº†ä¸€ä¸ªå®Œæ•´çš„Spring Beanï¼Œè¢«å­˜å‚¨åˆ°å•ä¾‹æ± singletonObjectsä¸­å»äº†ï¼Œå³å®Œæˆäº†Spring Beançš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</li></ul><p>ç”±äºBeançš„åˆå§‹åŒ–é˜¶æ®µçš„æ­¥éª¤æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥ç€é‡ç ”ç©¶Beançš„åˆå§‹åŒ–é˜¶æ®µSpring Beançš„åˆå§‹åŒ–è¿‡ç¨‹æ¶‰åŠå¦‚ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š</p><ul><li>Beanå®ä¾‹çš„å±æ€§å¡«å……</li><li>Awareæ¥å£å±æ€§æ³¨å…¥</li><li>BeanPostProcessorçš„before()æ–¹æ³•å›è°ƒ</li><li>InitializingBeanæ¥å£çš„åˆå§‹åŒ–æ–¹æ³•å›è°ƒ</li><li>è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•initå›è°ƒ</li><li>BeanPostProcessorçš„after()æ–¹æ³•å›è°ƒ</li></ul><p>BeanDefinition ä¸­æœ‰å¯¹å½“å‰Beanå®ä½“çš„æ³¨å…¥ä¿¡æ¯é€šè¿‡å±æ€§propertyValuesè¿›è¡Œäº†å­˜å‚¨ï¼Œä¾‹å¦‚UserServiceçš„å±æ€§ä¿¡æ¯å¦‚ä¸‹:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.itheima.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230423231423474.png" alt="image-20230423231423474" style="zoom:67%"><p>Springåœ¨è¿›è¡Œå±æ€§æ³¨å…¥æ—¶ï¼Œä¼šåˆ†ä¸ºå¦‚ä¸‹å‡ ç§æƒ…å†µï¼š</p><ul><li>æ³¨å…¥æ™®é€šå±æ€§ï¼ŒStringã€intæˆ–å­˜å‚¨åŸºæœ¬ç±»å‹çš„é›†åˆæ—¶ï¼Œç›´æ¥é€šè¿‡setæ–¹æ³•çš„åå°„è®¾ç½®è¿›å»ï¼›</li><li>æ³¨å…¥å•å‘å¯¹è±¡å¼•ç”¨å±æ€§æ—¶ï¼Œä»å®¹å™¨ä¸­getBeanè·å–åé€šè¿‡setæ–¹æ³•åå°„è®¾ç½®è¿›å»ï¼Œå¦‚æœå®¹å™¨ä¸­æ²¡æœ‰ï¼Œåˆ™å…ˆåˆ›å»ºè¢«æ³¨å…¥å¯¹è±¡Beanå®ä¾‹ï¼ˆå®Œæˆæ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼‰åï¼Œåœ¨è¿›è¡Œæ³¨å…¥æ“ä½œï¼›</li><li>æ³¨å…¥åŒå‘å¯¹è±¡å¼•ç”¨å±æ€§æ—¶ï¼Œå°±æ¯”è¾ƒå¤æ‚äº†ï¼Œæ¶‰åŠäº†å¾ªç¯å¼•ç”¨ï¼ˆå¾ªç¯ä¾èµ–ï¼‰é—®é¢˜ï¼Œä¸‹é¢ä¼šè¯¦ç»†é˜è¿°è§£å†³æ–¹æ¡ˆã€‚</li></ul><p>å¤šä¸ªå®ä½“ä¹‹é—´ç›¸äº’ä¾èµ–å¹¶å½¢æˆé—­ç¯çš„æƒ…å†µå°±å«åš&quot;å¾ªç¯ä¾èµ–&quot;ï¼Œä¹Ÿå«åš&quot;å¾ªç¯å¼•ç”¨&quot;</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424094314831.png" alt="image-20230424094314831" style="zoom:50%"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(UserService userService)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">&quot;userService&quot;</span> class=<span class="string">&quot;com.itheima.service.impl.UserServiceImpl&quot;</span>&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;userDao&quot;</span> ref=<span class="string">&quot;userDao&quot;</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean id=<span class="string">&quot;userDao&quot;</span> class=<span class="string">&quot;com.itheima.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;userService&quot;</span> ref=<span class="string">&quot;userService&quot;</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure><p>ä»£ç éªŒè¯åï¼Œåˆ†æå‡ºUserServiceä¸UserDaoå®ä¾‹åŒ–ä¸åˆå§‹åŒ–çš„é¡ºåºå¦‚ä¸‹ï¼š</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230425094829935.png" alt="image-20230425094829935" style="zoom:50%"><p>Springæä¾›äº†<span class="p red">ä¸‰çº§ç¼“å­˜</span>å­˜å‚¨<code>å®Œæ•´Beanå®ä¾‹</code>å’Œ<code>åŠæˆå“Beanå®ä¾‹</code> ï¼Œç”¨äºè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜<br>åœ¨DefaultListableBeanFactoryçš„ä¸Šå››çº§çˆ¶ç±»DefaultSingletonBeanRegistryä¸­æä¾›å¦‚ä¸‹ä¸‰ä¸ªMapï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultSingletonBeanRegistry</span> ... &#123;</span><br><span class="line">        <span class="comment">//1ã€æœ€ç»ˆå­˜å‚¨å•ä¾‹Beanæˆå“çš„å®¹å™¨ï¼Œå³å®ä¾‹åŒ–å’Œåˆå§‹åŒ–éƒ½å®Œæˆçš„Beanï¼Œç§°ä¹‹ä¸º&quot;ä¸€çº§ç¼“å­˜&quot;</span></span><br><span class="line">        Map&lt;String, Object&gt; singletonObjects = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>(<span class="number">256</span>);</span><br><span class="line">        <span class="comment">//2ã€æ—©æœŸBeanå•ä¾‹æ± ï¼Œç¼“å­˜åŠæˆå“å¯¹è±¡ï¼Œä¸”å½“å‰å¯¹è±¡å·²ç»è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨äº†ï¼Œç§°ä¹‹ä¸º&quot;äºŒçº§ç¼“å­˜&quot;</span></span><br><span class="line">        Map&lt;String, Object&gt; earlySingletonObjects = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>(<span class="number">16</span>);</span><br><span class="line">        <span class="comment">//3ã€å•ä¾‹Beançš„å·¥å‚æ± ï¼Œç¼“å­˜åŠæˆå“å¯¹è±¡ï¼Œå¯¹è±¡æœªè¢«å¼•ç”¨ï¼Œä½¿ç”¨æ—¶åœ¨é€šè¿‡å·¥å‚åˆ›å»ºBeanï¼Œç§°ä¹‹ä¸º&quot;ä¸‰çº§ç¼“å­˜&quot;</span></span><br><span class="line">        Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = <span class="keyword">new</span> <span class="title class_">HashMap</span>(<span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserServiceå’ŒUserDaoå¾ªç¯ä¾èµ–çš„è¿‡ç¨‹ç»“åˆä¸Šè¿°ä¸‰çº§ç¼“å­˜æè¿°ä¸€ä¸‹:</p><ul><li>UserService å®ä¾‹åŒ–å¯¹è±¡ï¼Œä½†å°šæœªåˆå§‹åŒ–ï¼Œå°†UserServiceå­˜å‚¨åˆ°ä¸‰çº§ç¼“å­˜ï¼›</li><li>UserService å±æ€§æ³¨å…¥ï¼Œéœ€è¦UserDaoï¼Œä»ç¼“å­˜ä¸­è·å–ï¼Œæ²¡æœ‰UserDaoï¼›</li><li>UserDaoå®ä¾‹åŒ–å¯¹è±¡ï¼Œä½†å°šæœªåˆå§‹åŒ–ï¼Œå°†UserDaoå­˜å‚¨åˆ°åˆ°ä¸‰çº§ç¼“å­˜ï¼›</li><li>UserDaoå±æ€§æ³¨å…¥ï¼Œéœ€è¦UserServiceï¼Œä»ä¸‰çº§ç¼“å­˜è·å–UserServiceï¼ŒUserServiceä»ä¸‰çº§ç¼“å­˜ç§»å…¥äºŒçº§ç¼“å­˜ï¼›</li><li>UserDaoæ‰§è¡Œå…¶ä»–ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ï¼Œæœ€ç»ˆæˆä¸ºä¸€ä¸ªå®ŒæˆBeanï¼Œå­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ï¼Œåˆ é™¤äºŒä¸‰çº§ç¼“å­˜ï¼›</li><li>UserService æ³¨å…¥UserDaoï¼›</li><li>UserServiceæ‰§è¡Œå…¶ä»–ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ï¼Œæœ€ç»ˆæˆä¸ºä¸€ä¸ªå®ŒæˆBeanï¼Œå­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ï¼Œåˆ é™¤äºŒä¸‰çº§ç¼“å­˜</li></ul><mark class="hl-label blue">å¾ªç¯å¼•ç”¨æ‰§è¡Œæµç¨‹</mark><div class="tabs" id="dbb1608a-78e1-4a08-8a89-ba25d12d8d9b"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-1"><i class="fas fa-atom"></i>1</button></li><li class="tab"><button type="button" data-href="#dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-2"><i class="far fa-sun"></i>2</button></li><li class="tab"><button type="button" data-href="#dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-3"><i class="fas fa-wind"></i>3</button></li><li class="tab"><button type="button" data-href="#dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-4"><i class="fas fa-fire-alt"></i>4</button></li><li class="tab"><button type="button" data-href="#dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-5"><i class="fas fa-cookie-bite"></i>æºç æµç¨‹å›¾</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-1"><p>â‘  é¦–å…ˆåˆ›å»ºuserServiceï¼Œåˆ›å»ºå®Œæ¯•åå­˜å…¥åˆ°ä¸‰çº§ç¼“å­˜ä¸­â‘¡éœ€è¦userDaoï¼Œä»ä¸‰çº§ç¼“å­˜ä¸­å¯»æ‰¾ï¼Œæ²¡æœ‰ï¼Œæ‰§è¡ŒDaoçš„åˆ›å»º</p><p>â‘¢åˆ›å»ºuserDaoï¼Œåˆ›å»ºå®Œæ¯•åå­˜å…¥åˆ°ä¸‰çº§ç¼“å­˜ä¸­</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230425095416327.png" alt="image-20230425095416327" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-2"><p>â‘£userdDaoåˆå§‹åŒ–ï¼Œéœ€è¦æ³¨å…¥userServiceã€‚â‘¤ä»ä¸€çº§äºŒçº§ä¸‰çº§ç¼“å­˜ä¸­è·å–userServiceï¼Œå¹¶è®¾ç½®ç»™userDaoã€‚</p><p>â‘¥å°†userServiceä»ä¸‰çº§ç¼“å­˜ä¸­åˆ é™¤ï¼Œå­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230425095909615.png" alt="image-20230425095909615" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-3"><p>â‘¦æ‰§è¡ŒuserDaoçš„å…¶ä»–åˆå§‹åŒ–æµç¨‹ã€‚â‘§æ‰§è¡Œå®Œæ¯•ï¼Œå°†userDaoä»ä¸‰çº§ç¼“å­˜ä¸­åˆ é™¤ï¼Œå­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230425100228892.png" alt="image-20230425100228892" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-4"><p>â‘¨å›æº¯åˆ°åˆ›å»ºuserServiceåˆ›å»ºè¿‡ç¨‹ã€‚</p><p>â‘©å°†userDaoè®¾ç½®ç»™userServiceï¼Œå…¶ä»–åˆå§‹åŒ–æµç¨‹ç»“æŸåï¼Œå°†userServiceä»äºŒçº§ç¼“å­˜ä¸­åˆ é™¤ï¼Œå­˜å…¥åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚</p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230425100607480.png" alt="image-20230425100607480" style="zoom:67%"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="dbb1608a-78e1-4a08-8a89-ba25d12d8d9b-5"><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230425101012174.png" alt="image-20230425101012174"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>å¸¸ç”¨çš„Awareæ¥å£</p><p>Awareæ¥å£æ˜¯ä¸€ç§æ¡†æ¶è¾…åŠ©å±æ€§æ³¨å…¥çš„ä¸€ç§æ€æƒ³ï¼Œå…¶ä»–æ¡†æ¶ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ç±»ä¼¼çš„æ¥å£ã€‚æ¡†æ¶å…·å¤‡é«˜åº¦å°è£…æ€§ï¼Œæˆ‘ä»¬æ¥è§¦åˆ°çš„ä¸€èˆ¬éƒ½æ˜¯ä¸šåŠ¡ä»£ç ï¼Œä¸€ä¸ªåº•å±‚åŠŸèƒ½APIä¸èƒ½è½»æ˜“çš„è·å–åˆ°ï¼Œä½†æ˜¯è¿™ä¸æ„å‘³ç€æ°¸è¿œç”¨ä¸åˆ°è¿™äº›å¯¹è±¡ï¼Œå¦‚æœç”¨åˆ°äº†ï¼Œå°±å¯ä»¥ä½¿ç”¨æ¡†æ¶æä¾›çš„ç±»ä¼¼Awareçš„æ¥å£ï¼Œè®©æ¡†æ¶ç»™æˆ‘ä»¬æ³¨å…¥è¯¥å¯¹è±¡ã€‚</p><table><thead><tr><th>Awareæ¥å£</th><th>å›è°ƒæ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>ServletContextAware</td><td>setServletContext(ServletContext context)</td><td>Springæ¡†æ¶å›è°ƒæ–¹æ³•æ³¨å…¥ServletContextå¯¹è±¡ï¼Œ webç¯å¢ƒä¸‹æ‰ç”Ÿæ•ˆ</td></tr><tr><td>BeanFactoryAware</td><td>setBeanFactory(BeanFactory factory)</td><td>Springæ¡†æ¶å›è°ƒæ–¹æ³•æ³¨å…¥beanFactoryå¯¹è±¡</td></tr><tr><td>BeanNameAware</td><td>setBeanName(String beanName)</td><td>Springæ¡†æ¶å›è°ƒæ–¹æ³•æ³¨å…¥beanFactoryå¯¹è±¡</td></tr><tr><td>ApplicationContextAware</td><td>setApplicationContext(ApplicationContext applicationContext)</td><td>Springæ¡†æ¶å›è°ƒæ–¹æ³•æ³¨å…¥applicationContext å¯¹è±¡</td></tr></tbody></table><hr><h2 id="7-Spring-IoCæ•´ä½“æµç¨‹æ€»ç»“">7. Spring IoCæ•´ä½“æµç¨‹æ€»ç»“</h2><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424095821127.png" alt="image-20230424095821127" style="zoom:67%"><hr><h2 id="8-Spring-xmlæ–¹å¼æ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶">8. Spring xmlæ–¹å¼æ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶</h2><p>xmlæ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶æœ‰ä¸¤ç§æ•´åˆæ–¹æ¡ˆï¼š</p><ul><li><p>ä¸éœ€è¦è‡ªå®šä¹‰åç©ºé—´ï¼Œä¸éœ€è¦ä½¿ç”¨Springçš„é…ç½®æ–‡ä»¶é…ç½®ç¬¬ä¸‰æ–¹æ¡†æ¶æœ¬èº«å†…å®¹ï¼Œä¾‹å¦‚ï¼šMyBatisï¼›</p></li><li><p>éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹æ¡†æ¶å‘½åç©ºé—´ï¼Œéœ€è¦ä½¿ç”¨Springçš„é…ç½®æ–‡ä»¶é…ç½®ç¬¬ä¸‰æ–¹æ¡†æ¶æœ¬èº«å†…å®¹ï¼Œä¾‹å¦‚ï¼šDubboã€‚</p></li></ul><hr><h3 id="8-1-Springæ•´åˆMyBatis">8.1 Springæ•´åˆMyBatis</h3><mark class="hl-label blue">åŸå§‹æ“ä½œä»£ç </mark><p>å¯¼åŒ…ï¼šmysql-connector-javaå’Œmybatis</p><div class="tabs" id="bc92cbb3-b048-4ec6-9f44-184d564f7310"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#bc92cbb3-b048-4ec6-9f44-184d564f7310-1"><i class="fas fa-seedling"></i>åˆ›å»ºUserå’ŒuserMapper</button></li><li class="tab"><button type="button" data-href="#bc92cbb3-b048-4ec6-9f44-184d564f7310-2"><i class="fas fa-leaf"></i>åˆ›å»ºUserMapper.xmlå’Œé…ç½®æ–‡ä»¶</button></li><li class="tab"><button type="button" data-href="#bc92cbb3-b048-4ec6-9f44-184d564f7310-3"><i class="fab fa-apple"></i>æµ‹è¯•</button></li><li class="tab"><button type="button" data-href="#bc92cbb3-b048-4ec6-9f44-184d564f7310-4"><i class="fas fa-cookie-bite"></i>springéœ€è¦æ•´åˆçš„åœ°æ–¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="bc92cbb3-b048-4ec6-9f44-184d564f7310-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bc92cbb3-b048-4ec6-9f44-184d564f7310-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from tb_user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;https://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.mapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bc92cbb3-b048-4ec6-9f44-184d564f7310-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> builder.build(in);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; all = mapper.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : all) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="bc92cbb3-b048-4ec6-9f44-184d564f7310-4"><p>spingæ•´åˆmybatiså°±æ˜¯æŠŠè¿™äº›ä»£ç å’Œé…ç½®æ–‡ä»¶æ¶ˆé™¤æ‰ï¼Œå¸®ä½ åˆ›å»ºmapper</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> MyBatisTest &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">public</span> static <span class="type">void</span> main(String[] args) throws <span class="keyword">Exception</span> &#123;</span><br><span class="line"></span><br><span class="line">      -  InputStream <span class="keyword">in</span> = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">      -  SqlSessionFactoryBuilder builder = <span class="built_in">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">      -  SqlSessionFactory sqlSessionFactory = builder.build(<span class="keyword">in</span>);</span><br><span class="line">      -  SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">      -  UserMapper mapper = sqlSession.getMapper(UserMapper.<span class="keyword">class</span>);</span><br><span class="line">        List&lt;<span class="keyword">User</span>&gt; <span class="keyword">all</span> = mapper.findAll();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">User</span> <span class="keyword">user</span> : <span class="keyword">all</span>) &#123;</span><br><span class="line">            <span class="keyword">System</span>.<span class="keyword">out</span>.println(<span class="keyword">user</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>ä¹‹å‰å·²ç»åœ¨Springä¸­ç®€å•çš„é…ç½®äº†SqlSessionFactoryï¼Œä½†æ˜¯è¿™ä¸æ˜¯æ­£è§„çš„æ•´åˆæ–¹å¼ï¼ŒMyBatisæä¾›äº†mybatis-spring.jarä¸“é—¨ç”¨äºä¸¤å¤§æ¡†æ¶çš„æ•´åˆã€‚</p><mark class="hl-label green">Springæ•´åˆMyBatis</mark><ul><li>å¯¼å…¥MyBatisæ•´åˆSpringçš„ç›¸å…³åæ ‡ï¼›mybatis-springå’Œspring-jdbc</li><li>ç¼–å†™Mapperå’ŒMapper.xmlï¼›</li><li>é…ç½®SqlSessionFactoryBeanå’ŒMapperScannerConfigurerï¼›</li><li>ç¼–å†™æµ‹è¯•ä»£ç </li></ul><div class="tabs" id="aafffedc-d448-489f-847a-e8728eac2260"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#aafffedc-d448-489f-847a-e8728eac2260-1"><i class="fas fa-horse"></i>ç¼–å†™Mapperå’ŒMapper.xml</button></li><li class="tab"><button type="button" data-href="#aafffedc-d448-489f-847a-e8728eac2260-2"><i class="fas fa-cat"></i>é…ç½®SqlSessionFactoryBeanå’ŒMapperScannerConfigurer</button></li><li class="tab"><button type="button" data-href="#aafffedc-d448-489f-847a-e8728eac2260-3"><i class="fas fa-dove"></i>ç¼–å†™æµ‹è¯•ä»£ç </button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="aafffedc-d448-489f-847a-e8728eac2260-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from tb_user;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="aafffedc-d448-489f-847a-e8728eac2260-2"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®æ•°æ®æº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®SqlSessionFactoryBeanï¼Œä½œç”¨å°†SqlSessionFactoryå­˜å‚¨åˆ°springå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®MapperScannerConfigurerï¼Œä½œç”¨æ‰«ææŒ‡å®šçš„åŒ…ï¼Œäº§ç”ŸMapperå¯¹è±¡å­˜å‚¨åˆ°springå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.itheima.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>SqlSessionFactoryBeanå®ç°FactoryBeanæ¥å£:å‘springå®¹å™¨æä¾›SqlSessionFactory</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.mybatis.spring;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;SqlSessionFactory&gt;, InitializingBean, ApplicationListener&lt;ApplicationEvent&gt;&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®ç°FactoryBeanæ¥å£</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactory <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.sqlSessionFactory == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.afterPropertiesSet();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MapperScannerConfigurerå®ç°BeanDefinitionRegistryPostProcessoræ¥å£:å¯¹mapperï¼ˆä¾‹å¦‚userMapperï¼‰è¿›è¡Œæ‰«æï¼Œå¹¶å­˜å‚¨åˆ°Springå®¹å™¨ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> org.mybatis.spring.mapper;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperScannerConfigurer</span> <span class="keyword">implements</span> <span class="title class_">BeanDefinitionRegistryPostProcessor</span>, InitializingBean, ApplicationContextAware, BeanNameAware &#123;</span><br><span class="line">    <span class="comment">//å®ç°BeanDefinitionRegistryPostProcessoræ¥å£</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.processPropertyPlaceHolders) &#123;</span><br><span class="line">            <span class="built_in">this</span>.processPropertyPlaceHolders();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ClassPathMapperScanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathMapperScanner</span>(registry);</span><br><span class="line">        scanner.setAddToConfig(<span class="built_in">this</span>.addToConfig);</span><br><span class="line">        scanner.setAnnotationClass(<span class="built_in">this</span>.annotationClass);</span><br><span class="line">        scanner.setMarkerInterface(<span class="built_in">this</span>.markerInterface);</span><br><span class="line">        scanner.setSqlSessionFactory(<span class="built_in">this</span>.sqlSessionFactory);</span><br><span class="line">        scanner.setSqlSessionTemplate(<span class="built_in">this</span>.sqlSessionTemplate);</span><br><span class="line">        scanner.setSqlSessionFactoryBeanName(<span class="built_in">this</span>.sqlSessionFactoryBeanName);</span><br><span class="line">        scanner.setSqlSessionTemplateBeanName(<span class="built_in">this</span>.sqlSessionTemplateBeanName);</span><br><span class="line">        scanner.setResourceLoader(<span class="built_in">this</span>.applicationContext);</span><br><span class="line">        scanner.setBeanNameGenerator(<span class="built_in">this</span>.nameGenerator);</span><br><span class="line">        scanner.setMapperFactoryBeanClass(<span class="built_in">this</span>.mapperFactoryBeanClass);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(<span class="built_in">this</span>.lazyInitialization)) &#123;</span><br><span class="line">            scanner.setLazyInitialization(Boolean.valueOf(<span class="built_in">this</span>.lazyInitialization));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        scanner.registerFilters();</span><br><span class="line">        scanner.scan(StringUtils.tokenizeToStringArray(<span class="built_in">this</span>.basePackage, <span class="string">&quot;,; \t\n&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="aafffedc-d448-489f-847a-e8728eac2260-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ClassPathxmlApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ClassPathxmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>); </span><br><span class="line"><span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> applicationContext.getBean(UserMapper.class); </span><br><span class="line">List&lt;User&gt; all = userMapper.findAll();</span><br><span class="line">System.out.println(all);</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><mark class="hl-label blue">Springæ•´åˆMyBatisçš„åŸç†å‰–æ</mark><p>æ•´åˆåŒ…é‡Œæä¾›äº†ä¸€ä¸ªSqlSessionFactoryBeanå’Œä¸€ä¸ªæ‰«æMapperçš„é…ç½®å¯¹è±¡ï¼ŒSqlSessionFactoryBeanä¸€æ—¦è¢«å®ä¾‹åŒ–ï¼Œå°±å¼€å§‹æ‰«æMapperå¹¶é€šè¿‡åŠ¨æ€ä»£ç†äº§ç”ŸMapperçš„å®ç°ç±»å­˜å‚¨åˆ°Springå®¹å™¨ä¸­ã€‚ç›¸å…³çš„æœ‰å¦‚ä¸‹å››ä¸ªç±»ï¼š</p><ul><li>SqlSessionFactoryBeanï¼šéœ€è¦è¿›è¡Œé…ç½®ï¼Œç”¨äºæä¾›SqlSessionFactoryï¼›</li><li>MapperScannerConfigurerï¼šéœ€è¦è¿›è¡Œé…ç½®ï¼Œç”¨äºæ‰«ææŒ‡å®šmapperæ³¨å†ŒBeanDefinitionï¼›</li><li>MapperFactoryBeanï¼šMapperçš„FactoryBeanï¼Œè·å¾—æŒ‡å®šMapperæ—¶è°ƒç”¨getObjectæ–¹æ³•ï¼›</li><li>ClassPathMapperScannerï¼šdefinition.setAutowireMode(2) ä¿®æ”¹äº†è‡ªåŠ¨æ³¨å…¥çŠ¶æ€ï¼Œæ‰€ä»¥MapperFactoryBeanä¸­çš„setSqlSessionFactoryä¼šè‡ªåŠ¨æ³¨å…¥è¿›å»ã€‚</li></ul><p>é…ç½®SqlSessionFactoryBeanä½œç”¨æ˜¯å‘å®¹å™¨ä¸­æä¾›SqlSessionFactoryï¼ŒSqlSessionFactoryBeanå®ç°äº†FactoryBeanå’ŒInitializingBeanä¸¤ä¸ªæ¥å£ï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨æ‰§è¡ŒgetObject() å’ŒafterPropertiesSet()æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SqlSessionFactoryBean <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;SqlSessionFactory&gt;, InitializingBean&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºSqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="built_in">this</span>.sqlSessionFactory = <span class="built_in">this</span>.buildSqlSessionFactory();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactory <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®MapperScannerConfigurerä½œç”¨æ˜¯æ‰«æMapperï¼Œå‘å®¹å™¨ä¸­æ³¨å†ŒMapperå¯¹åº”çš„MapperFactoryBeanï¼Œ MapperScannerConfigurerå®ç°äº†BeanDefinitionRegistryPostProcessorå’ŒInitializingBeanä¸¤ä¸ªæ¥å£ï¼Œä¼šåœ¨postProcessBeanDefinitionRegistryæ–¹æ³•ä¸­å‘å®¹å™¨ä¸­æ³¨å†ŒMapperFactoryBean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MapperScannerConfigurer</span> <span class="keyword">implements</span> <span class="title class_">BeanDefinitionRegistryPostProcessor</span>, InitializingBean&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> &#123;</span><br><span class="line">        <span class="type">ClassPathMapperScanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathMapperScanner</span>(registry);</span><br><span class="line">        scanner.scan(StringUtils.tokenizeToStringArray(<span class="built_in">this</span>.basePackage, <span class="string">&quot;,; \t\n&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClassPathMapperScanner</span> <span class="keyword">extends</span> <span class="title class_">ClassPathBeanDefinitionScanner</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Set&lt;BeanDefinitionHolder&gt; <span class="title function_">doScan</span><span class="params">(String... basePackages)</span> &#123;</span><br><span class="line">        Set&lt;BeanDefinitionHolder&gt; beanDefinitions = <span class="built_in">super</span>.doScan(basePackages);</span><br><span class="line">        <span class="keyword">if</span> (beanDefinitions.isEmpty()) &#123;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.processBeanDefinitions(beanDefinitions);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processBeanDefinitions</span><span class="params">(Set&lt;BeanDefinitionHolder&gt; beanDefinitions)</span> &#123;</span><br><span class="line">        <span class="comment">//è®¾ç½®Mapperçš„beanClassæ˜¯org.mybatis.spring.mapper.MapperFactoryBean</span></span><br><span class="line">        definition.setBeanClass(<span class="built_in">this</span>.mapperFactoryBeanClass);</span><br><span class="line">        definition.setAutowireMode(<span class="number">2</span>); <span class="comment">//è®¾ç½®MapperBeanFactory è¿›è¡Œè‡ªåŠ¨æ³¨å…¥</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClassPathBeanDefinitionScanner</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">scan</span><span class="params">(String... basePackages)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.doScan(basePackages);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Set&lt;BeanDefinitionHolder&gt; <span class="title function_">doScan</span><span class="params">(String... basePackages)</span> &#123;</span><br><span class="line">        <span class="comment">//å°†æ‰«æåˆ°çš„ç±»æ³¨å†Œåˆ°beanDefinitionMapä¸­ï¼Œæ­¤æ—¶beanClassæ˜¯å½“å‰ç±»å…¨é™å®šå</span></span><br><span class="line">        <span class="built_in">this</span>.registerBeanDefinition(definitionHolder, <span class="built_in">this</span>.registry);</span><br><span class="line">        <span class="keyword">return</span> beanDefinitions;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> applicationContext.getBean(UserMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperFactoryBean</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MapperFactoryBean</span><span class="params">(Class&lt;T&gt; mapperInterface)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mapperInterface = mapperInterface;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSqlSessionFactory</span><span class="params">(SqlSessionFactory sqlSessionFactory)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSessionTemplate = <span class="built_in">this</span>.createSqlSessionTemplate(sqlSessionFactory);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getSqlSession().getMapper(<span class="built_in">this</span>.mapperInterface);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="8-2-Springæ•´åˆDubbo">8.2 Springæ•´åˆDubbo</h3><p>Spring æ•´åˆå…¶ä»–ç»„ä»¶æ—¶å°±ä¸åƒMyBatisè¿™ä¹ˆç®€å•äº†ï¼Œä¾‹å¦‚Dubboæ¡†æ¶åœ¨äºSpringè¿›è¡Œæ•´åˆæ—¶ï¼Œè¦ä½¿ç”¨Dubboæä¾›çš„å‘½åç©ºé—´çš„æ‰©å±•æ–¹å¼ï¼Œè‡ªå®šä¹‰äº†ä¸€äº›Dubboçš„æ ‡ç­¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xmlns:dubbo=<span class="string">&quot;http://dubbo.apache.org/schema/dubbo&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!--é…ç½®åº”ç”¨åç§°--&gt;</span><br><span class="line">    &lt;dubbo:application name=<span class="string">&quot;dubbo1-consumer&quot;</span>/&gt;</span><br><span class="line">    &lt;!--é…ç½®æ³¨å†Œä¸­å¿ƒåœ°å€--&gt;</span><br><span class="line">    &lt;dubbo:registry address=<span class="string">&quot;zookeeper://localhost:2181&quot;</span>/&gt;</span><br><span class="line">    &lt;!--æ‰«ædubboçš„æ³¨è§£--&gt;</span><br><span class="line">    &lt;dubbo:annotation <span class="keyword">package</span>=<span class="string">&quot;com.itheima.controller&quot;</span>/&gt;</span><br><span class="line">    &lt;!--æ¶ˆè´¹è€…é…ç½®--&gt;</span><br><span class="line">    &lt;dubbo:consumer check=<span class="string">&quot;false&quot;</span> timeout=<span class="string">&quot;1000&quot;</span> retries=<span class="string">&quot;0&quot;</span>/&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†é™ä½æˆ‘ä»¬æ­¤å¤„çš„å­¦ä¹ æˆæœ¬ï¼Œä¸åœ¨å¼•å…¥Dubboç¬¬ä¸‰æ–¹æ¡†æ¶äº†ï¼Œä»¥Springçš„ context å‘½åç©ºé—´å»è¿›è¡Œè®²è§£ï¼Œè¯¥æ–¹å¼ä¹Ÿæ˜¯å‘½åç©ºé—´æ‰©å±•æ–¹å¼ã€‚éœ€æ±‚ï¼šåŠ è½½å¤–éƒ¨propertiesæ–‡ä»¶ï¼Œå°†é”®å€¼å¯¹å­˜å‚¨åœ¨Springå®¹å™¨ä¸­</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis </span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><p>å¼•å…¥contextå‘½åç©ºé—´ï¼Œåœ¨ä½¿ç”¨contextå‘½åç©ºé—´çš„æ ‡ç­¾ï¼Œä½¿ç”¨SpELè¡¨è¾¾å¼åœ¨xmlæˆ–æ³¨è§£ä¸­æ ¹æ®keyè·å¾—value</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;context:property-placeholder location=<span class="string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;dataSource&quot;</span> class=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><p>å…¶å®ï¼ŒåŠ è½½çš„propertiesæ–‡ä»¶ä¸­çš„å±æ€§æœ€ç»ˆé€šè¿‡Springè§£æåä¼šè¢«å­˜å‚¨åˆ°äº†Springå®¹å™¨çš„environmentä¸­å»ï¼Œä¸ä»…è‡ªå·±å®šä¹‰çš„å±æ€§ä¼šè¿›è¡Œå­˜å‚¨ï¼ŒSpringä¹Ÿä¼šæŠŠç¯å¢ƒç›¸å…³çš„ä¸€äº›å±æ€§è¿›è¡Œå­˜å‚¨</p><div class="fj-gallery"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424103808426.png" alt="image-20230424103808426"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424103835267.png" alt="image-20230424103835267"></div><p>åŸç†å‰–æè§£æè¿‡ç¨‹ï¼Œåªèƒ½ä»æºå¤´ClassPathXmlApplicationContextå…¥æ‰‹ï¼Œç»å†å¤æ‚çš„æºç è¿½è¸ªï¼Œæ‰¾åˆ°å¦‚ä¸‹ä¸¤ä¸ªç‚¹ï¼š</p><p>1ï¼‰åœ¨åˆ›å»ºDefaultNamespaceHandlerResolveræ—¶ï¼Œä¸ºå¤„ç†å™¨æ˜ å°„åœ°å€handlerMappingsLocationå±æ€§èµ‹å€¼ï¼Œå¹¶åŠ è½½å‘½åç©ºé—´å¤„ç†å™¨åˆ°Map&lt;String, Object&gt; handlerMappings ä¸­å»</p><p><code>this.handlerMappingsLocation = &quot;META-INF/spring.handlers&quot;;</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424104152200.png" alt="image-20230424104152200"></p><div class="fj-gallery"><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424104205461.png" alt="image-20230424104205461"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424104216181.png" alt="image-20230424104216181"></p></div><p>ç¬¬ä¸€ç‚¹å®Œæˆåï¼ŒMapé›†åˆhandlerMappingså°±è¢«å¡«å……äº†å¾ˆå¤šXxxNamespaceHandlerï¼Œç»§ç»­å¾€ä¸‹è¿½ä»£ç </p><p>2ï¼‰åœ¨DefaultBeanDefinitionDocumentReaderçš„parseBeanDefinitionsæ–¹æ³•ä¸­ï¼Œå‘ç°å¦‚ä¸‹é€»è¾‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœæ˜¯é»˜è®¤å‘½åç©ºé—´</span></span><br><span class="line"><span class="keyword">if</span> (delegate.isDefaultNamespace(ele))&#123;</span><br><span class="line">    <span class="built_in">this</span>.parseDefaultElement(ele, delegate);</span><br><span class="line">    <span class="comment">//å¦åˆ™æ˜¯è‡ªå®šä¹‰å‘½åç©ºé—´</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    delegate.parseCustomElement(ele);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯é»˜è®¤å‘½åç©ºé—´ï¼Œåˆ™æ‰§è¡ŒparseDefaultElementæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">parseDefaultElement</span><span class="params">(Element ele, BeanDefinitionParserDelegate delegate)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (delegate.nodeNameEquals(ele, <span class="string">&quot;import&quot;</span>)) &#123;</span><br><span class="line">        <span class="built_in">this</span>.importBeanDefinitionResource(ele);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (delegate.nodeNameEquals(ele, <span class="string">&quot;alias&quot;</span>)) &#123;</span><br><span class="line">        <span class="built_in">this</span>.processAliasRegistration(ele);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (delegate.nodeNameEquals(ele, <span class="string">&quot;bean&quot;</span>)) &#123;</span><br><span class="line">        <span class="built_in">this</span>.processBeanDefinition(ele, delegate);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (delegate.nodeNameEquals(ele, <span class="string">&quot;beans&quot;</span>)) &#123;</span><br><span class="line">        <span class="built_in">this</span>.doRegisterBeanDefinitions(ele);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è‡ªå®šä¹‰å‘½åç©ºé—´ï¼Œåˆ™æ‰§è¡ŒparseCustomElementæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> BeanDefinition <span class="title function_">parseCustomElement</span><span class="params">(Element ele, <span class="meta">@Nullable</span> BeanDefinition containingBd)</span> &#123;</span><br><span class="line">    <span class="comment">//è§£æå‘½åç©ºé—´</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">namespaceUri</span> <span class="operator">=</span> <span class="built_in">this</span>.getNamespaceURI(ele);</span><br><span class="line">    <span class="comment">//è·å¾—å‘½åç©ºé—´è§£æå™¨</span></span><br><span class="line">    <span class="type">NamespaceHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="built_in">this</span>.readerContext.getNamespaceHandlerResolver().resolve(namespaceUri);</span><br><span class="line">    <span class="comment">//è§£ææ‰§è¡Œçš„æ ‡ç­¾</span></span><br><span class="line">    <span class="keyword">return</span> handler.parse(ele, <span class="keyword">new</span> <span class="title class_">ParserContext</span>(<span class="built_in">this</span>.readerContext, <span class="built_in">this</span>, containingBd));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œresovleæ–¹æ³•æ—¶ï¼Œå°±æ˜¯ä»Map&lt;String, Object&gt; handlerMappingsä¸­æ ¹æ®å‘½åç©ºé—´åç§°è·å¾—å¯¹åº”çš„å¤„ç†å™¨å¯¹è±¡ï¼Œæ­¤å¤„æ˜¯ContextNamespaceHandlerï¼Œæœ€ç»ˆæ‰§è¡ŒNamespaceHandlerçš„parseæ–¹æ³•</p><p>ContextNamespaceHandleræºç å¦‚ä¸‹ï¼Œé—´æ¥å®ç°äº†NamespaceHandleræ¥å£ï¼Œåˆå§‹åŒ–æ–¹æ³•initä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚ç”±äºcontextå‘½åç©ºé—´ä¸‹æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œæ‰€ä»¥æ¯ä¸ªæ ‡ç­¾åˆå•ç‹¬æ³¨å†Œäº†å¯¹åº”çš„è§£æå™¨ï¼Œæ³¨å†Œåˆ°äº†å…¶çˆ¶ç±»NamespaceHandlerSupportçš„Map&lt;String, BeanDefinitionParser&gt; parsersä¸­å»äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContextNamespaceHandler</span> <span class="keyword">extends</span> <span class="title class_">NamespaceHandlerSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ContextNamespaceHandler</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;property-placeholder&quot;</span>, <span class="keyword">new</span> <span class="title class_">PropertyPlaceholderBeanDefinitionParser</span>());</span><br><span class="line">        <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;property-override&quot;</span>, <span class="keyword">new</span> <span class="title class_">PropertyOverrideBeanDefinitionParser</span>());</span><br><span class="line">        <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;annotation-config&quot;</span>, <span class="keyword">new</span> <span class="title class_">AnnotationConfigBeanDefinitionParser</span>());</span><br><span class="line">        <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;component-scan&quot;</span>, <span class="keyword">new</span> <span class="title class_">ComponentScanBeanDefinitionParser</span>()); <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;load-time-weaver&quot;</span>, <span class="keyword">new</span> <span class="title class_">LoadTimeWeaverBeanDefinitionParser</span>()); <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;spring-configured&quot;</span>, <span class="keyword">new</span> <span class="title class_">SpringConfiguredBeanDefinitionParser</span>()); <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;mbean-export&quot;</span>, <span class="keyword">new</span> <span class="title class_">MBeanExportBeanDefinitionParser</span>());</span><br><span class="line">        <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;mbean-server&quot;</span>, <span class="keyword">new</span> <span class="title class_">MBeanServerBeanDefinitionParser</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬æ¸…æ¥šçš„äº†è§£äº†å¤–éƒ¨å‘½åç©ºé—´æ ‡ç­¾çš„æ‰§è¡Œæµç¨‹ï¼Œå¦‚ä¸‹ï¼š</p><ul><li>å°†è‡ªå®šä¹‰æ ‡ç­¾çš„çº¦æŸ ä¸ ç‰©ç†çº¦æŸæ–‡ä»¶ä¸ç½‘ç»œçº¦æŸåç§°çš„çº¦æŸ ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨åˆ°ä¸€ä¸ªspring.schemasæ–‡ä»¶é‡Œ ï¼Œè¯¥æ–‡ä»¶å­˜å‚¨åœ¨ç±»åŠ è½½è·¯å¾„çš„ META-INFé‡Œï¼ŒSpringä¼šè‡ªåŠ¨åŠ è½½åˆ°;</li><li>å°†è‡ªå®šä¹‰å‘½åç©ºé—´çš„åç§° ä¸ è‡ªå®šä¹‰å‘½åç©ºé—´çš„å¤„ç†å™¨æ˜ å°„å…³ç³» ä»¥é”®å€¼å¯¹å½¢å¼å­˜åœ¨åˆ°ä¸€ä¸ªå«spring.handlersæ–‡ä»¶é‡Œï¼Œè¯¥æ–‡ä»¶å­˜å‚¨åœ¨ç±»åŠ è½½è·¯å¾„çš„ META-INFé‡Œï¼ŒSpringä¼šè‡ªåŠ¨åŠ è½½åˆ°;</li><li>å‡†å¤‡å¥½NamespaceHandlerï¼Œå¦‚æœå‘½åç©ºé—´åªæœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œé‚£ä¹ˆç›´æ¥åœ¨parseæ–¹æ³•ä¸­è¿›è¡Œè§£æå³å¯ï¼Œä¸€èˆ¬è§£æç»“æœå°±æ˜¯æ³¨å†Œè¯¥æ ‡ç­¾å¯¹åº”çš„BeanDefinitionã€‚å¦‚æœå‘½åç©ºé—´é‡Œæœ‰å¤šä¸ªæ ‡ç­¾ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨initæ–¹æ³•ä¸­ä¸ºæ¯ä¸ªæ ‡ç­¾éƒ½æ³¨å†Œä¸€ä¸ªBeanDefinitionParserï¼Œåœ¨æ‰§è¡ŒNamespaceHandlerçš„parseæ–¹æ³•æ—¶åœ¨åˆ†æµç»™ä¸åŒçš„BeanDefinitionParserè¿›è¡Œè§£æ(é‡å†™doParseæ–¹æ³•å³å¯)ã€‚</li></ul><blockquote><p>æ¡ˆä¾‹ï¼šè®¾æƒ³è‡ªå·±æ˜¯ä¸€åæ¶æ„å¸ˆï¼Œè¿›è¡ŒæŸä¸€ä¸ªæ¡†æ¶ä¸Springçš„é›†æˆå¼€å‘ï¼Œæ•ˆæœæ˜¯é€šè¿‡ä¸€ä¸ªæŒ‡ç¤ºæ ‡ç­¾ï¼Œå‘Springå®¹å™¨ä¸­è‡ªåŠ¨æ³¨å…¥ä¸€ä¸ªBeanPostProcessor</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/xmlSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:haohao</span>=<span class="string">&quot;http://www.itheima.com/haohao&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.itheima.com/haohao</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.itheima.com/haohao/haohao-annotation.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">haohao:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¥éª¤åˆ†æï¼š</p><ol><li>ç¡®å®šå‘½åç©ºé—´åç§°ã€schemaè™šæ‹Ÿè·¯å¾„ã€æ ‡ç­¾åç§°ï¼›</li><li>ç¼–å†™schemaçº¦æŸæ–‡ä»¶haohao-annotation.xsd</li><li>åœ¨ç±»åŠ è½½è·¯å¾„ä¸‹åˆ›å»ºMETAç›®å½•ï¼Œç¼–å†™çº¦æŸæ˜ å°„æ–‡ä»¶spring.schemaså’Œå¤„ç†å™¨æ˜ å°„æ–‡ä»¶spring.handlers</li><li>ç¼–å†™å‘½åç©ºé—´å¤„ç†å™¨ HaohaoNamespaceHandlerï¼Œåœ¨initæ–¹æ³•ä¸­æ³¨å†ŒHaohaoBeanDefinitionParser</li><li>ç¼–å†™æ ‡ç­¾çš„è§£æå™¨ HaohaoBeanDefinitionParserï¼Œåœ¨parseæ–¹æ³•ä¸­æ³¨å†ŒHaohaoBeanPostProcessor</li><li>ç¼–å†™HaohaoBeanPostProcessor</li></ol><p>=======ä»¥ä¸Šäº”æ­¥æ˜¯æ¡†æ¶å¼€å‘è€…å†™çš„ï¼Œä»¥ä¸‹æ˜¯æ¡†æ¶ä½¿ç”¨è€…å†™çš„===========</p><ol><li>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­å¼•å…¥å‘½åç©ºé—´</li><li>åœ¨applicationContext.xmlé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„æ ‡ç­¾</li></ol><p>ç¼–å†™schemaçº¦æŸæ–‡ä»¶haohao-annotation.xsd</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xsd:schema</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.itheima.com/haohao&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">xmlns:xsd</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">targetNamespace</span>=<span class="string">&quot;http://www.itheima.com/haohao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">xsd:element</span> <span class="attr">name</span>=<span class="string">&quot;annotation-driven&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">xsd:element</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">xsd:schema</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ç±»åŠ è½½è·¯å¾„ä¸‹åˆ›å»ºMETAç›®å½•ï¼Œç¼–å†™çº¦æŸæ˜ å°„æ–‡ä»¶spring.schemaså’Œå¤„ç†å™¨æ˜ å°„æ–‡ä»¶spring.handlers</p><div class="fj-gallery"><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424110332628.png" alt="image-20230424110332628"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/image-20230424110402498.png" alt="image-20230424110402498"></p></div><p>ç¼–å†™å‘½åç©ºé—´å¤„ç†å™¨HaohaoNamespaceHandlerï¼Œåœ¨initæ–¹æ³•ä¸­æ³¨å†ŒHaohaoBeanDefinitionParser</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HaohaoNamespaceHandler</span> <span class="keyword">extends</span> <span class="title class_">NamespaceHandlerSupport</span> &#123;</span><br><span class="line">    <span class="meta">@Overridepublic</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.registerBeanDefinitionParser(<span class="string">&quot;annotation-driven&quot;</span>,<span class="keyword">new</span> <span class="title class_">HaohaoBeanDefinitionParser</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–å†™æ ‡ç­¾çš„è§£æå™¨HaohaoBeanDefinitionParserï¼Œåœ¨parseæ–¹æ³•ä¸­æ³¨å†ŒHaohaoBeanPostProcessor</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HaohaoBeanDefinitionParser</span> <span class="keyword">implements</span> <span class="title class_">BeanDefinitionParser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> BeanDefinition <span class="title function_">parse</span><span class="params">(Element element, ParserContext parserContext)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºHaohaoBeanPostProcessorçš„BeanDefinitionRootBeanDefinition </span></span><br><span class="line">        beanDefinition = <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>();</span><br><span class="line">        beanDefinition.setBeanClass(HaohaoBeanPostProcessor.class);</span><br><span class="line">        <span class="comment">//æ³¨å†ŒHaohaoBeanPostProcessor</span></span><br><span class="line">        parserContext.getRegistry().registerBeanDefinition(<span class="string">&quot;haohaoBeanPostProcessor&quot;</span>,beanDefinition);</span><br><span class="line">        <span class="keyword">return</span> beanDefinition;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–å†™HaohaoBeanPostProcessor</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HaohaoBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è‡ªåŠ¨æ³¨å…¥HaohaoBeanPostProcessoræˆåŠŸ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>åŸºäºxmlçš„Springåº”ç”¨</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://wuwawawa.github.io/posts/42f6a7bf.html">https://wuwawawa.github.io/posts/42f6a7bf.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>LuckyBoyğŸ¥</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2023-04-24</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2023-05-16</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>Spring</a></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/ed620e7e.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_30.webp" onerror='onerror=null,src="/assets/r2.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Springæ¡†æ¶çš„è¯ç”Ÿ</div></div></a></div><div class="next-post pull-right"><a href="/posts/93be85ee.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_32.webp" onerror='onerror=null,src="/assets/r2.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">åŸºäºæ³¨è§£çš„Springåº”ç”¨</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/ed620e7e.html" title="Springæ¡†æ¶çš„è¯ç”Ÿ"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_30.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-16</div><div class="title">Springæ¡†æ¶çš„è¯ç”Ÿ</div></div></a></div><div><a href="/posts/d063f224.html" title="Springåˆæ¢:IoCã€DIã€AOP"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_29.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-16</div><div class="title">Springåˆæ¢:IoCã€DIã€AOP</div></div></a></div><div><a href="/posts/637d34d.html" title="AOPç®€ä»‹"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_33.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-16</div><div class="title">AOPç®€ä»‹</div></div></a></div><div><a href="/posts/8f292d64.html" title="åŸºäºAOPçš„ç”³æ˜å¼äº‹åŠ¡æ§åˆ¶"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_36.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-16</div><div class="title">åŸºäºAOPçš„ç”³æ˜å¼äº‹åŠ¡æ§åˆ¶</div></div></a></div><div><a href="/posts/93be85ee.html" title="åŸºäºæ³¨è§£çš„Springåº”ç”¨"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_32.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-16</div><div class="title">åŸºäºæ³¨è§£çš„Springåº”ç”¨</div></div></a></div><div><a href="/posts/62726e73.html" title="åŸºäºæ³¨è§£é…ç½®çš„AOP"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_35.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-05-16</div><div class="title">åŸºäºæ³¨è§£é…ç½®çš„AOP</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:700">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-SpringBean%E7%9A%84%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3"><span class="toc-text">1. SpringBeançš„é…ç½®è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Bean%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-text">1.1 Beançš„åŸºç¡€é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Bean%E7%9A%84%E5%88%AB%E5%90%8D%E9%85%8D%E7%BD%AE"><span class="toc-text">1.2 Beançš„åˆ«åé…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-Bean%E7%9A%84%E8%8C%83%E5%9B%B4%E9%85%8D%E7%BD%AE"><span class="toc-text">1.3 Beançš„èŒƒå›´é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-Bean%E7%9A%84%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><span class="toc-text">1.4 Beançš„å»¶è¿ŸåŠ è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-Bean%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E9%94%80%E6%AF%81%E6%96%B9%E6%B3%95%E9%85%8D%E7%BD%AE"><span class="toc-text">1.5 Beançš„åˆå§‹åŒ–é”€æ¯æ–¹æ³•é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-Bean%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-text">1.6 Beançš„å®ä¾‹åŒ–é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-Bean%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E9%85%8D%E7%BD%AE"><span class="toc-text">1.7 Beançš„ä¾èµ–æ³¨å…¥é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-Spring%E7%9A%84%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE%E6%A0%87%E7%AD%BE"><span class="toc-text">1.8 Springçš„å…¶ä»–é…ç½®æ ‡ç­¾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Spring%E7%9A%84get%E6%96%B9%E6%B3%95"><span class="toc-text">2. Springçš„getæ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Spring-%E9%85%8D%E7%BD%AE%E9%9D%9E%E8%87%AA%E5%AE%9A%E4%B9%89Bean"><span class="toc-text">3. Spring é…ç½®éè‡ªå®šä¹‰Bean</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Bean-%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">4. Bean å®ä¾‹åŒ–çš„åŸºæœ¬æµç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Spring%E7%9A%84%E5%90%8E%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">5. Springçš„åå¤„ç†å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-BeanFactoryPostProcessor"><span class="toc-text">5.1 BeanFactoryPostProcessor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-BeanPostProcessor"><span class="toc-text">5.2 BeanPostProcessor</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Spring-Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">6. Spring Beançš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-Spring-IoC%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B%E6%80%BB%E7%BB%93"><span class="toc-text">7. Spring IoCæ•´ä½“æµç¨‹æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Spring-xml%E6%96%B9%E5%BC%8F%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6"><span class="toc-text">8. Spring xmlæ–¹å¼æ•´åˆç¬¬ä¸‰æ–¹æ¡†æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-Spring%E6%95%B4%E5%90%88MyBatis"><span class="toc-text">8.1 Springæ•´åˆMyBatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-Spring%E6%95%B4%E5%90%88Dubbo"><span class="toc-text">8.2 Springæ•´åˆDubbo</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color:transparent"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">é­”æ”¹æŒ‡å—</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/personal/bb/">æˆ‘çš„å” å¨</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.fomal.cc/" title="FomalhautğŸ¥"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/60e5d4e39da7c077.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""></a></div></div></div></div><div class="copyright"><span><b>&copy;2022-2024</b></span><span><b>&nbsp;&nbsp;By LuckyBoyğŸ¥</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="æœ¬ç«™æ•°æ®åˆ†æå¾—ç›Šäº51laæŠ€æœ¯æ”¯æŒ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20226665å·"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/èŒICPå¤‡-20226665-fe1384.svg" alt=""></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç»Service Workeråˆ†æµè‡³ç¼¤çº·äº‘å¯¹è±¡å­˜å‚¨"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-ç¼¤çº·äº‘-9c62da.svg" alt=""></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading()),setTimeout((function(){preloader.endLoading()}),5e3),document.getElementById("loading-box").addEventListener("click",(()=>{preloader.endLoading()}))</script><div class="js-pjax"><script>(()=>{const t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))},o=()=>{"object"!=typeof twikoo?getScript("https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js").then(t):setTimeout(t,0)};btf.loadComment(document.getElementById("twikoo-wrap"),o)})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),"object"==typeof preloader&&preloader.initLoading(),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script data-pjax>if(document.getElementById("recent-posts")&&"/"===location.pathname){var parent=document.getElementById("recent-posts"),child='<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://wuwawawa.github.io/categories/ç®—æ³•/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ ç®—æ³•å­¦ä¹ ç¬”è®° (15)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://wuwawawa.github.io/categories/Java/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŸ Javaç¬”è®° (28)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://wuwawawa.github.io/categories/æ•°æ®åº“/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¨ æ•°æ®åº“ç¬”è®° (19)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://wuwawawa.github.io/categories/è®¾è®¡æ¨¡å¼/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ è®¾è®¡æ¨¡å¼ç¬”è®° (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://wuwawawa.github.io/categories/Spring/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŒ¸ Springç¬”è®° (14)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://wuwawawa.github.io/categories/ä¸­é—´ä»¶/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ• ä¸­é—´ä»¶ç¬”è®° (8)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://wuwawawa.github.io/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';console.log("å·²æŒ‚è½½magnet"),parent.insertAdjacentHTML("afterbegin",child)}</script><style>#catalog_magnet{flex-wrap:wrap;display:flex;width:100%;justify-content:space-between;padding:10px 10px 0 10px;align-content:flex-start}.magnet_item{flex-basis:calc(33.333333333333336% - 5px);background:#e9e9e9;margin-bottom:10px;border-radius:8px;transition:all .2s ease-in-out}.magnet_item:hover{background:var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:#000}.magnet_link:hover{color:#fff}@media screen and (max-width:600px){.magnet_item{flex-basis:100%}}.magnet_link_context{display:flex;padding:10px;font-size:16px;transition:all .2s ease-in-out}.magnet_link_context:hover{padding:10px 20px}</style><style></style><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","2s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","2s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>function gitcalendar_injector_config(){document.getElementById("gitZone").insertAdjacentHTML("afterbegin",'<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>'),console.log("å·²æŒ‚è½½gitcalendar")}document.getElementById("gitZone")&&"/site/census/"===location.pathname&&(gitcalendar_injector_config(),GitCalendarInit("/api?null",["#d9e0df","#c6e0dc","#a8dcd4","#9adcd2","#89ded1","#77e0d0","#5fdecb","#47dcc6","#39dcc3","#1fdabe","#00dab9"],"null"))</script><script data-pjax>function butterfly_swiper_injector_config(){var a=document.getElementById("recent-posts");console.log("å·²æŒ‚è½½butterfly_swiper"),a.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/397c083a.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_43.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/397c083a.html&quot;);" href="javascript:void(0);" alt="">Java8æ–°ç‰¹æ€§</a><div class="blog-slider__text">Lambdaè¡¨è¾¾å¼ã€å‡½æ•°å¼æ¥å£ã€Stream API</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/397c083a.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/3f9c0b8e.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_4.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/3f9c0b8e.html&quot;);" href="javascript:void(0);" alt="">3.å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹</a><div class="blog-slider__text">å…±äº«é—®é¢˜ã€synchronizedã€çº¿ç¨‹å®‰å…¨åˆ†æã€Monitorã€wait/notifyã€çº¿ç¨‹çŠ¶æ€è½¬æ¢ã€æ´»è·ƒæ€§ã€Lock</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/3f9c0b8e.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/9c5b9bb4.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_8.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-03</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/9c5b9bb4.html&quot;);" href="javascript:void(0);" alt="">7.1å…±äº«æ¨¡å‹ä¹‹å·¥å…·</a><div class="blog-slider__text">çº¿ç¨‹æ± ã€AQSã€ReentrantLockã€Semaphoreç­‰é”çš„åŸç†</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/9c5b9bb4.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/f9285b5c.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover_9.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-03-10</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/f9285b5c.html&quot;);" href="javascript:void(0);" alt="">å…³äºå­—ç¬¦ä¸²å­—é¢é‡è¿›å…¥åˆ°å­—ç¬¦ä¸²å¸¸é‡æ± çš„æ—¶æœº</a><div class="blog-slider__text">å­—ç¬¦ä¸²å¸¸é‡æ± çš„ä¸€äº›é—®é¢˜</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/f9285b5c.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lmy-picbed.oss-cn-hangzhou.aliyuncs.com/blog/default_cover_60.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-09</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</a><div class="blog-slider__text">ğŸ¥§æœ¬æ–‡æ±‡æ€»Markdownæ ¼å¼ä»¥åŠå¤–æŒ‚æ ‡ç­¾åœ¨ç½‘é¡µç«¯çš„æ¸²æŸ“æ•ˆæœï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2013454d.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="/",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script></body></html>